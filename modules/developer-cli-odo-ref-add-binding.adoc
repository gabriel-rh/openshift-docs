// Module included in the following assemblies:
//
// * cli_reference/developer_cli_odo/odo-cli-reference.adoc

:_content-type: REFERENCE
[id="odo-add-binding_{context}"]
= odo add binding


The `odo add binding` command adds a link between an Operator-backed service and a component. odo uses the Service Binding Operator to create this link.

If you run this command from a directory containing a Devfile, it will modify the Devfile, and once you push to the cluster (using `odo dev`), it creates an instance of the ServiceBinding resource.

If you run this command from a directory without a Devfile, in the interactive mode, it will perform one or several operations, depending on your choice:

- Display the YAML definition of the ServiceBinding resource in the output
- Save the YAML definition of the ServiceBinding resource to a file
- Create an instance of the ServiceBinding resource in the cluster

Running the command in non-interactive mode, from a directory without a Devfile, displays the YAML definition of the ServiceBinding resource in the output.

Currently, the command only allows you to connect to Operator-backed services that support binding through the Service Binding Operator. For more information about the Operators supported by the Service Binding Operator, see the link:https://github.com/redhat-developer/service-binding-operator#known-bindable-operators[Service Binding Operator README].



.Prerequisites

* A cluster with the Service Binding Operator installed.
* Operator-backed services or resources to bind your application to.
* Optionally, a directory containing a Devfile. You can create one using the `odo init` command, if required.


== Interactive Mode

In the interactive mode, you are guided to choose:

- The namespace containing the service instance you want to bind to.
- A service from the list of bindable service instances as supported by the Service Binding Operator.
+
If a namespace is selected, the list of services shows the services in that namespace. Otherwise, the list of services shows the services in the current namespace.

- If a Devfile is not present in the directory, a workload resource.
- The option to bind the service as a file. For more information, see "Understanding bind as files".
- A name for the binding.

.Sample command
[source,terminal]
----
$ odo add binding
----

.Sample interactive mode
[source,terminal]
----
$ odo add binding
? Do you want to list services from: current namespace
? Select service instance you want to bind to: cluster-sample (Cluster.postgresql.k8s.enterprisedb.io)
? Enter the Binding's name: my-go-app-cluster-sample
? How do you want to bind the service? Bind As Files
? Select naming strategy for binding names: DEFAULT
 ✓  Successfully added the binding to the devfile.
Run `odo dev` to create it on the cluster.
You can automate this command by executing:
  odo add binding --service cluster-sample.Cluster.postgresql.k8s.enterprisedb.io --name my-go-app-cluster-sample
----



== Non-interactive mode

In the non-interactive mode, you specify the following required information through the command-line:

- `--service` flag to specify the service you want to bind to.
- `--service-namespace` flag to specify the namespace containing the service you want to bind to. The current namespace is used if this flag is not specified.
- `--workload` flag to specify the workload resource, if a Devfile is not present in the directory.
- `--name` flag to specify a name for the binding. For more information, see "Understanding bind as files".
- `--bind-as-files` flag to specify if the service should be bound as a file. This flag is set to `true` by default.
- `--naming-strategy` flag to specify the naming strategy to use for binding names. 
+ 
This flag is empty by default,  but it can be set to pre-defined strategies: `none`, `lowercase`, or `uppercase`. Otherwise, it is treated as a custom Go template, and it is handled accordingly. For more information, see the section "Binding workloads using Service Binding Operator" in the "Building applications" book in the {product-title} documentation.

.Command syntax
[source,yaml]
----
$ odo add binding --name <name> --service <service-name> [--service-namespace NAMESPACE] [--bind-as-files {true, false}] [--naming-strategy {none, lowercase, uppercase}]
----

.Sample non-interactive mode
[source,yaml]
----
$ odo add binding --service cluster-sample.Cluster.postgresql.k8s.enterprisedb.io --name my-go-app-cluster-sample
 ✓  Successfully added the binding to the devfile.
Run `odo dev` to create it on the cluster.
----

== Understanding bind as files

To connect your component with a service, you need to store some data, for example, username, password, and host address, on your component's container.
If the service is bound as files, this data is written to a file and stored on the container, otherwise it is injected as environment variables inside the container.

Every piece of data is stored either in its own individual file or as an environment variable.
For example, if your data includes a username and password, then 2 separate files, or 2 environment variables, are created to store them both.

[discrete]
== Formats supported by the --service flag

The `--service` flag supports the following formats to specify the service name:

- `<name>`
- `<name>.<kind>`
- `<name>.<kind>.<apigroup>`
- `<name>/<kind>`
- `<name>/<kind>.<apigroup>`

[discrete]
== Formats supported by the --workload flag

The `--workload` flag supports the following formats to specify the workload name:

- `<name>.<kind>.<apigroup>`
- `<name>/<kind>.<apigroup>`

These formats are helpful when multiple services with the same name exist on the cluster.




// * xref:../../applications/connecting_applications_to_services/installing-sbo.adoc#installing-sbo[Installing Service Binding Operator].

// Refer to [this page](https://docs.openshift.com/container-platform/4.10/applications/connecting_applications_to_services/binding-workloads-using-sbo.html#sbo-naming-strategies_binding-workloads-using-sbo) for more details on naming strategies.
