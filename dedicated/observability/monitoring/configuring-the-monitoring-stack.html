

<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

<head>
    <meta name="robots" content="noindex,nofollow">
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  
  
  <title>Configuring the monitoring stack - Monitoring | Observability | OpenShift Dedicated </title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css"/>
  <link href="https://docs.okd.io/latest/_stylesheets/search.css" rel="stylesheet" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/autumn.css" rel="stylesheet"  media="screen"/>
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png"/>
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css"/>
  <link href="https://assets.openshift.net/content/osh-nav-footer.css" rel="stylesheet" type="text/css" media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/docs.css" rel="stylesheet"  media="screen"/>
  <link href="https://docs.okd.io/latest/_stylesheets/print.css" rel="stylesheet" type="text/css" media="print"/>
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">

  <!-- Adobe DTM -->
  <script src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <!-- End Adobe DTM -->

  <script id="trustarc" src="https://static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
        rel="stylesheet">

</head>

<body onload="selectVersion('');">
  
<nav id="main">
  <div class="container">
    <div class="row">
      <div class="navbar navbar-default navbar-openshift" role="navigation">
        <div class="navbar-header">
            <a href="#nav-main" class="dropdown-toggle navbar-menu-toggle hidden visible-xs" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
          <a class="navbar-brand" href="/"></a>
        </div>
        <div id="nav-main" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="products" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                Products <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-column flex-md-row">
                  <div class="col-xs-12 col-sm-3">
                    <h3>Overview</h3>
                    <ul class="nav flex-column">
                      <li><a target="_blank" href="https://www.openshift.com/products/features/">Features</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/products/pricing/">Pricing</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-9">
                    <h3>Featured Products</h3>
                    <ul class="nav">
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/container-platform/">Red Hat OpenShift Container&nbsp;Platform</a>
                        <p class="d-none d-md-block">Build, deploy and manage your applications across cloud- and on-premise infrastructure</p>
                      </li>
                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/dedicated/">Red Hat OpenShift Dedicated</a>
                        <p class="d-none d-md-block">Single-tenant, high-availability Kubernetes clusters in the public cloud</p>
                      </li>

                      <li>
                        <a target="_blank" href="https://www.openshift.com/products/online/">Red Hat OpenShift Online</a>
                        <p class="d-none d-md-block">The fastest way for developers to build, host and scale applications in the public cloud</p>
                      </li>

                      <li class="nav-item">
                        <a target="_blank" href="https://www.openshift.com/products/">All products <span class="fa fa-angle-right"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li id="learn" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Learn <span class="fa fa-angle-down"></span>
              </a>
              <div class="dropdown-menu">
                <div class="row flex-md-nowrap">
                  <div class="col-xs-12 col-sm-6">
                    <h3>Learn</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/what-is-openshift/">What is OpenShift</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/get-started/">Get started</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/partners/">Partners</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/success-stories/">Customer success stories</a></li>
                      <li><a target="_blank" href="https://blog.openshift.com">Blog</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/resources/">Resources</a></li>
                    </ul>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <h3>Technology Topics</h3>
                    <ul class="nav">
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/knative/">Knative</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/security/">Security</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/kubernetes/">Kubernetes</a></li>
                      <li><a target="_blank" href="https://www.openshift.com/learn/topics/service-brokers/">Service Brokers</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Community <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://commons.openshift.org">OpenShift Commons</a></li>
                <li><a target="_blank" href="https://www.okd.io">Open Source (OKD)</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/startups/">Startups</a></li>
                <li><a target="_blank" href="https://www.openshift.com/community/programs/grants/">Grants</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Support <span class="fa fa-angle-down"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a target="_blank" href="https://help.openshift.com">Help Center</a></li>
                <li><a href="https://docs.openshift.com">OpenShift Docs</a></li>
              </ul>
            </li>

            <li><a target="_blank" class="nav-sign-up" href="https://www.openshift.com/trial/">Free Trial</a></li>

            <li><a target="_blank" href="https://console.redhat.com/openshift" class="nav-sign-in">Log In <span class="fa fa-angle-right"></span></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

  
  <div class="container">
    <button id="hc-open-btn" class="open-btn-sm" onclick="openNav()" aria-label="Open"><span class="fa fa-bars" /></button>
    <ol class="breadcrumb hide-for-print">
      

      

      

      

      

      
        <span>
          <div class="alert alert-info" role="primary" id="support-info">
            <strong>Starting on March 12, 2025, OpenShift docs will only be available at <a href="https://docs.redhat.com/en/" style="color: #0C5460 !important" class="link-primary">docs.redhat.com</a>. From that time on, docs.openshift.com links will automatically redirect to their locations on docs.redhat.com.
            </strong>
          </div>
        </span>
      

      

      
      

      

      


      

      


      

      

      <li class="sitename">
        <a href="/">
          Documentation</a>
      </li>
      <li class="hidden-xs active">
        
          <a href="../../welcome/index.html">OpenShift Dedicated </a>
        
      </li>
      <li class="hidden-xs active">
        Observability
      </li>
      <li class="hidden-xs active"><a href="../../observability/monitoring/monitoring-overview.html">Monitoring</a></li>
      
      <li class="hidden-xs active">
        Configuring the monitoring stack
      </li>
      
      <span text-align="right" style="float: right !important">
        <a href="https://github.com/openshift/openshift-docs/commits/dedicated-4/observability/monitoring/configuring-the-monitoring-stack.adoc"><span class="material-icons-outlined" title="Page history">history</span></a>
        
        <a href="https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12332330&issuetype=1&components=12367614&priority=4&summary=[dedicated-4]+Issue+in+file+observability/monitoring/configuring-the-monitoring-stack.adoc">
          <span class="material-icons-outlined" title="Open an issue">bug_report</span>
        </a>
        <a href="javascript: void(0);" onclick="window.print()"><span class="material-icons-outlined" title="Print page (Save as PDF)">picture_as_pdf</span></a>
        
        
      </span>
      
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas hide-for-print">
        <div class="row-fluid">
          <div id="btn-close">
            <button id="hc-close-btn" onclick="closeNav()" class="close-btn-sm" aria-label="close"><span class="fa fa-times" /></button>
          </div>
          <div id="hc-search">
            <input id="hc-search-input" type="text" aria-label="search">
            <button id="hc-search-btn" aria-label="search"><span class="fa fa-search" /></button>
          </div>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0"><span id="tgSpan0" class="fa fa-angle-right"></span>About</a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../../welcome/index.html">Welcome</a></li>
            <li><a class="" href="../../welcome/legal-notice.html">Legal notice</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1"><span id="tgSpan1" class="fa fa-angle-right"></span>What's new</a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_whats_new/osd-whats-new.html">What's new with OpenShift Dedicated</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2"><span id="tgSpan2" class="fa fa-angle-right"></span>Introduction to OpenShift Dedicated</a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_architecture/osd-understanding.html">Understanding OpenShift Dedicated</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-2-1"><span id="sgSpan-2-1" class="fa fa-caret-right"></span>&nbsp;Policies and service definition</a>
              <ul id="topicSubGroup-2-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../osd_architecture/osd_policy/osd-service-definition.html">OpenShift Dedicated service definition</a></li>
                  <li><a class="" href="../../osd_architecture/osd_policy/policy-responsibility-matrix.html">Responsibility assignment matrix</a></li>
                  <li><a class="" href="../../osd_architecture/osd_policy/policy-process-security.html">Understanding process and security for OpenShift Dedicated</a></li>
                  <li><a class="" href="../../osd_architecture/osd_policy/osd-sre-access.html">SRE and service account access</a></li>
                  <li><a class="" href="../../osd_architecture/osd_policy/policy-understand-availability.html">About availability for OpenShift Dedicated</a></li>
                  <li><a class="" href="../../osd_architecture/osd_policy/osd-life-cycle.html">Update life cycle</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3"><span id="tgSpan3" class="fa fa-angle-right"></span>Architecture</a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../../architecture/index.html">Architecture overview</a></li>
            <li><a class="" href="../../architecture/architecture.html">Product architecture</a></li>
            <li><a class="" href="../../architecture/osd-architecture-models-gcp.html">Architecture models</a></li>
            <li><a class="" href="../../architecture/control-plane.html">Control plane architecture</a></li>
            <li><a class="" href="../../architecture/nvidia-gpu-architecture-overview.html">NVIDIA GPU architecture overview</a></li>
            <li><a class="" href="../../architecture/understanding-development.html">Understanding OpenShift development</a></li>
            <li><a class="" href="../../architecture/admission-plug-ins.html">Admission plugins</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4"><span id="tgSpan4" class="fa fa-angle-right"></span>Red Hat OpenShift Cluster Manager</a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../../ocm/ocm-overview.html">Red Hat OpenShift Cluster Manager</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5"><span id="tgSpan5" class="fa fa-angle-right"></span>Planning your environment</a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_planning/osd-limits-scalability.html">Limits and scalability</a></li>
            <li><a class="" href="../../osd_planning/gcp-ccs.html">Customer Cloud Subscriptions on GCP</a></li>
            <li><a class="" href="../../osd_planning/aws-ccs.html">Customer Cloud Subscriptions on AWS</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6"><span id="tgSpan6" class="fa fa-angle-right"></span>Getting started</a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_getting_started/osd-understanding-your-cloud-deployment-options.html">Understanding your cloud deployment options</a></li>
            <li><a class="" href="../../osd_getting_started/osd-getting-started.html">Getting started with OpenShift Dedicated</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7"><span id="tgSpan7" class="fa fa-angle-right"></span>OpenShift Dedicated clusters on GCP</a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_gcp_clusters/creating-a-gcp-psc-enabled-private-cluster.html">Private Service Connect overview</a></li>
            <li><a class="" href="../../osd_gcp_clusters/creating-a-gcp-cluster-with-workload-identity-federation.html">Creating a cluster on GCP with Workload Identity Federation authentication</a></li>
            <li><a class="" href="../../osd_gcp_clusters/creating-a-gcp-cluster-sa.html">Creating a cluster on GCP with Service Account authentication</a></li>
            <li><a class="" href="../../osd_gcp_clusters/creating-a-gcp-cluster-redhat-account.html">Creating a cluster on GCP with a Red Hat cloud account</a></li>
            <li><a class="" href="../../osd_gcp_clusters/osd-deleting-a-cluster-gcp.html">Deleting an OpenShift Dedicated cluster on GCP</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8"><span id="tgSpan8" class="fa fa-angle-right"></span>OpenShift Dedicated clusters on AWS</a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_aws_clusters/creating-an-aws-cluster.html">Creating a cluster on AWS</a></li>
            <li><a class="" href="../../osd_aws_clusters/osd-deleting-a-cluster-aws.html">Deleting an OpenShift Dedicated cluster on AWS</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9"><span id="tgSpan9" class="fa fa-angle-right"></span>Support</a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li><a class="" href="../../support/index.html">Support overview</a></li>
            <li><a class="" href="../../support/managing-cluster-resources.html">Managing your cluster resources</a></li>
            <li><a class="" href="../../support/getting-support.html">Getting support</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-3"><span id="sgSpan-9-3" class="fa fa-caret-right"></span>&nbsp;Remote health monitoring with connected clusters</a>
              <ul id="topicSubGroup-9-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../support/remote_health_monitoring/about-remote-health-monitoring.html">About remote health monitoring</a></li>
                  <li><a class="" href="../../support/remote_health_monitoring/showing-data-collected-by-remote-health-monitoring.html">Showing data collected by remote health monitoring</a></li>
                  <li><a class="" href="../../support/remote_health_monitoring/using-insights-to-identify-issues-with-your-cluster.html">Using Insights to identify issues with your cluster</a></li>
                  <li><a class="" href="../../support/remote_health_monitoring/using-insights-operator.html">Using Insights Operator</a></li>              </ul>
            </li>
            <li><a class="" href="../../support/gathering-cluster-data.html">Gathering data about your cluster</a></li>
            <li><a class="" href="../../support/summarizing-cluster-specifications.html">Summarizing cluster specifications</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-6"><span id="sgSpan-9-6" class="fa fa-caret-right"></span>&nbsp;Troubleshooting</a>
              <ul id="topicSubGroup-9-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../support/troubleshooting/verifying-node-health.html">Verifying node health</a></li>
                  <li><a class="" href="../../support/troubleshooting/troubleshooting-operator-issues.html">Troubleshooting Operator issues</a></li>
                  <li><a class="" href="../../support/troubleshooting/investigating-pod-issues.html">Investigating pod issues</a></li>
                  <li><a class="" href="../../support/troubleshooting/troubleshooting-s2i.html">Troubleshooting the Source-to-Image process</a></li>
                  <li><a class="" href="../../support/troubleshooting/troubleshooting-storage-issues.html">Troubleshooting storage issues</a></li>
                  <li><a class="" href="../../support/troubleshooting/investigating-monitoring-issues.html">Investigating monitoring issues</a></li>
                  <li><a class="" href="../../support/troubleshooting/diagnosing-oc-issues.html">Diagnosing OpenShift CLI (oc) issues</a></li>
                  <li><a class="" href="../../support/troubleshooting/sd-managed-resources.html">OpenShift Dedicated managed resources</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10"><span id="tgSpan10" class="fa fa-angle-right"></span>Web console</a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../../web_console/web-console-overview.html">Web console overview</a></li>
            <li><a class="" href="../../web_console/web-console.html">Accessing the web console</a></li>
            <li><a class="" href="../../web_console/using-dashboard-to-get-cluster-information.html">Viewing cluster information</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-3"><span id="sgSpan-10-3" class="fa fa-caret-right"></span>&nbsp;Dynamic plugins</a>
              <ul id="topicSubGroup-10-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../web_console/dynamic-plugin/overview-dynamic-plugin.html">Overview of dynamic plugins</a></li>
                  <li><a class="" href="../../web_console/dynamic-plugin/dynamic-plugins-get-started.html">Getting started with dynamic plugins</a></li>
                  <li><a class="" href="../../web_console/dynamic-plugin/deploy-plugin-cluster.html">Deploy your plugin on a cluster</a></li>
                  <li><a class="" href="../../web_console/dynamic-plugin/dynamic-plugin-example.html">Dynamic plugin example</a></li>
                  <li><a class="" href="../../web_console/dynamic-plugin/dynamic-plugins-reference.html">Dynamic plugin reference</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-4"><span id="sgSpan-10-4" class="fa fa-caret-right"></span>&nbsp;Web terminal</a>
              <ul id="topicSubGroup-10-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../web_console/web_terminal/installing-web-terminal.html">Installing the web terminal</a></li>
                  <li><a class="" href="../../web_console/web_terminal/odc-using-web-terminal.html">Using the web terminal</a></li>
                  <li><a class="" href="../../web_console/web_terminal/troubleshooting-web-terminal.html">Troubleshooting the web terminal</a></li>
                  <li><a class="" href="../../web_console/web_terminal/uninstalling-web-terminal.html">Uninstalling the web terminal</a></li>              </ul>
            </li>
            <li><a class="" href="../../web_console/creating-quick-start-tutorials.html">About quick start tutorials</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11"><span id="tgSpan11" class="fa fa-angle-right"></span>CLI tools</a>
      <ul id="topicGroup11" class="collapse  list-unstyled">
            <li><a class="" href="../../cli_reference/index.html">CLI tools overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-1"><span id="sgSpan-11-1" class="fa fa-caret-right"></span>&nbsp;OpenShift CLI (oc)</a>
              <ul id="topicSubGroup-11-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cli_reference/openshift_cli/getting-started-cli.html">Getting started with the OpenShift CLI</a></li>
                  <li><a class="" href="../../cli_reference/openshift_cli/configuring-cli.html">Configuring the OpenShift CLI</a></li>
                  <li><a class="" href="../../cli_reference/openshift_cli/usage-oc-kubectl.html">Usage of oc and kubectl commands</a></li>
                  <li><a class="" href="../../cli_reference/openshift_cli/managing-cli-profiles.html">Managing CLI profiles</a></li>
                  <li><a class="" href="../../cli_reference/openshift_cli/extending-cli-plugins.html">Extending the OpenShift CLI with plugins</a></li>
                  <li><a class="" href="../../cli_reference/openshift_cli/developer-cli-commands.html">OpenShift CLI developer command reference</a></li>
                  <li><a class="" href="../../cli_reference/openshift_cli/administrator-cli-commands.html">OpenShift CLI administrator command reference</a></li>              </ul>
            </li>
            <li><a class="" href="../../cli_reference/odo-important-update.html">Developer CLI (odo)</a></li>
            <li><a class="" href="../../cli_reference/kn-cli-tools.html">Knative CLI (kn) for use with OpenShift Serverless</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-4"><span id="sgSpan-11-4" class="fa fa-caret-right"></span>&nbsp;Pipelines CLI (tkn)</a>
              <ul id="topicSubGroup-11-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cli_reference/tkn_cli/installing-tkn.html">Installing tkn</a></li>
                  <li><a class="" href="../../cli_reference/tkn_cli/op-configuring-tkn.html">Configuring tkn</a></li>
                  <li><a class="" href="../../cli_reference/tkn_cli/op-tkn-reference.html">Basic tkn commands</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-5"><span id="sgSpan-11-5" class="fa fa-caret-right"></span>&nbsp;opm CLI</a>
              <ul id="topicSubGroup-11-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cli_reference/opm/cli-opm-install.html">Installing the opm CLI</a></li>
                  <li><a class="" href="../../cli_reference/opm/cli-opm-ref.html">opm CLI reference</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-11-6"><span id="sgSpan-11-6" class="fa fa-caret-right"></span>&nbsp;Operator SDK</a>
              <ul id="topicSubGroup-11-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cli_reference/osdk/cli-osdk-install.html">Installing the Operator SDK CLI</a></li>
                  <li><a class="" href="../../cli_reference/osdk/cli-osdk-ref.html">Operator SDK CLI reference</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup12"><span id="tgSpan12" class="fa fa-angle-right"></span>Cluster administration</a>
      <ul id="topicGroup12" class="collapse  list-unstyled">
            <li><a class="" href="../../osd_cluster_admin/osd-cluster-notifications.html">Cluster notifications</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-12-1"><span id="sgSpan-12-1" class="fa fa-caret-right"></span>&nbsp;Configuring private connections</a>
              <ul id="topicSubGroup-12-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../osd_cluster_admin/osd_private_connections/aws-private-connections.html">Configuring private connections for AWS</a></li>
                  <li><a class="" href="../../osd_cluster_admin/osd_private_connections/private-cluster.html">Configuring a private cluster</a></li>              </ul>
            </li>
            <li><a class="" href="../../osd_cluster_admin/osd-cluster-autoscaling.html">Cluster autoscaling</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-12-3"><span id="sgSpan-12-3" class="fa fa-caret-right"></span>&nbsp;Nodes</a>
              <ul id="topicSubGroup-12-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../osd_cluster_admin/osd_nodes/osd-nodes-machinepools-about.html">About machine pools</a></li>
                  <li><a class="" href="../../osd_cluster_admin/osd_nodes/osd-managing-worker-nodes.html">Managing compute nodes</a></li>
                  <li><a class="" href="../../osd_cluster_admin/osd_nodes/osd-nodes-about-autoscaling-nodes.html">About autoscaling nodes on a cluster</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup13"><span id="tgSpan13" class="fa fa-angle-right"></span>Security and compliance</a>
      <ul id="topicGroup13" class="collapse  list-unstyled">
            <li><a class="" href="../../security/audit-log-view.html">Viewing audit logs</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup14"><span id="tgSpan14" class="fa fa-angle-right"></span>Authentication and authorization</a>
      <ul id="topicGroup14" class="collapse  list-unstyled">
            <li><a class="" href="../../authentication/index.html">Authentication and authorization overview</a></li>
            <li><a class="" href="../../authentication/understanding-authentication.html">Understanding authentication</a></li>
            <li><a class="" href="../../authentication/managing-oauth-access-tokens.html">Managing user-owned OAuth access tokens</a></li>
            <li><a class="" href="../../authentication/sd-configuring-identity-providers.html">Configuring identity providers</a></li>
            <li><a class="" href="../../authentication/osd-revoking-cluster-privileges.html">Revoking privileges and access to an OpenShift Dedicated cluster</a></li>
            <li><a class="" href="../../authentication/osd-admin-roles.html">Managing administration roles and users</a></li>
            <li><a class="" href="../../authentication/using-rbac.html">Using RBAC to define and apply permissions</a></li>
            <li><a class="" href="../../authentication/understanding-and-creating-service-accounts.html">Understanding and creating service accounts</a></li>
            <li><a class="" href="../../authentication/using-service-accounts-in-applications.html">Using service accounts in applications</a></li>
            <li><a class="" href="../../authentication/using-service-accounts-as-oauth-client.html">Using a service account as an OAuth client</a></li>
            <li><a class="" href="../../authentication/tokens-scoping.html">Scoping tokens</a></li>
            <li><a class="" href="../../authentication/bound-service-account-tokens.html">Using bound service account tokens</a></li>
            <li><a class="" href="../../authentication/managing-security-context-constraints.html">Managing security context constraints</a></li>
            <li><a class="" href="../../authentication/understanding-and-managing-pod-security-admission.html">Understanding and managing pod security admission</a></li>
            <li><a class="" href="../../authentication/ldap-syncing.html">Syncing LDAP groups</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup15"><span id="tgSpan15" class="fa fa-angle-right"></span>Upgrading</a>
      <ul id="topicGroup15" class="collapse  list-unstyled">
            <li><a class="" href="../../upgrading/osd-upgrades.html">Upgrading OpenShift Dedicated</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup16"><span id="tgSpan16" class="fa fa-angle-right"></span>CI/CD</a>
      <ul id="topicGroup16" class="collapse  list-unstyled">
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-16-0"><span id="sgSpan-16-0" class="fa fa-caret-right"></span>&nbsp;CI/CD overview</a>
              <ul id="topicSubGroup-16-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cicd/overview/index.html">About CI/CD</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-16-1"><span id="sgSpan-16-1" class="fa fa-caret-right"></span>&nbsp;Builds using Shipwright</a>
              <ul id="topicSubGroup-16-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cicd/builds_using_shipwright/overview-openshift-builds.html">Overview of Builds</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-16-2"><span id="sgSpan-16-2" class="fa fa-caret-right"></span>&nbsp;Builds using BuildConfig</a>
              <ul id="topicSubGroup-16-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cicd/builds/understanding-image-builds.html">Understanding image builds</a></li>
                  <li><a class="" href="../../cicd/builds/understanding-buildconfigs.html">Understanding build configurations</a></li>
                  <li><a class="" href="../../cicd/builds/creating-build-inputs.html">Creating build inputs</a></li>
                  <li><a class="" href="../../cicd/builds/managing-build-output.html">Managing build output</a></li>
                  <li><a class="" href="../../cicd/builds/build-strategies.html">Using build strategies</a></li>
                  <li><a class="" href="../../cicd/builds/basic-build-operations.html">Performing and configuring basic builds</a></li>
                  <li><a class="" href="../../cicd/builds/triggering-builds-build-hooks.html">Triggering and modifying builds</a></li>
                  <li><a class="" href="../../cicd/builds/advanced-build-operations.html">Performing advanced builds</a></li>
                  <li><a class="" href="../../cicd/builds/running-entitled-builds.html">Using Red Hat subscriptions in builds</a></li>
                  <li><a class="" href="../../cicd/builds/troubleshooting-builds.html">Troubleshooting builds</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-16-3"><span id="sgSpan-16-3" class="fa fa-caret-right"></span>&nbsp;Pipelines</a>
              <ul id="topicSubGroup-16-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cicd/pipelines/about-pipelines.html">About OpenShift Pipelines</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-16-4"><span id="sgSpan-16-4" class="fa fa-caret-right"></span>&nbsp;GitOps</a>
              <ul id="topicSubGroup-16-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cicd/gitops/about-redhat-openshift-gitops.html">About OpenShift GitOps</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-16-5"><span id="sgSpan-16-5" class="fa fa-caret-right"></span>&nbsp;Jenkins</a>
              <ul id="topicSubGroup-16-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../cicd/jenkins/images-other-jenkins.html">Configuring Jenkins images</a></li>
                  <li><a class="" href="../../cicd/jenkins/images-other-jenkins-agent.html">Jenkins agent</a></li>
                  <li><a class="" href="../../cicd/jenkins/migrating-from-jenkins-to-openshift-pipelines.html">Migrating from Jenkins to OpenShift Pipelines</a></li>
                  <li><a class="" href="../../cicd/jenkins/important-changes-to-openshift-jenkins-images.html">Important changes to OpenShift Jenkins images</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup17"><span id="tgSpan17" class="fa fa-angle-right"></span>Images</a>
      <ul id="topicGroup17" class="collapse  list-unstyled">
            <li><a class="" href="../../openshift_images/index.html">Overview of images</a></li>
            <li><a class="" href="../../openshift_images/configuring-samples-operator.html">Overview of the Cluster Samples Operator</a></li>
            <li><a class="" href="../../openshift_images/samples-operator-alt-registry.html">Using the Cluster Samples Operator with an alternate registry</a></li>
            <li><a class="" href="../../openshift_images/create-images.html">Creating images</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-4"><span id="sgSpan-17-4" class="fa fa-caret-right"></span>&nbsp;Managing images</a>
              <ul id="topicSubGroup-17-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../openshift_images/managing_images/managing-images-overview.html">Managing images overview</a></li>
                  <li><a class="" href="../../openshift_images/managing_images/tagging-images.html">Tagging images</a></li>
                  <li><a class="" href="../../openshift_images/managing_images/image-pull-policy.html">Image pull policy</a></li>
                  <li><a class="" href="../../openshift_images/managing_images/using-image-pull-secrets.html">Using image pull secrets</a></li>              </ul>
            </li>
            <li><a class="" href="../../openshift_images/image-streams-manage.html">Managing image streams</a></li>
            <li><a class="" href="../../openshift_images/using-imagestreams-with-kube-resources.html">Using image streams with Kubernetes resources</a></li>
            <li><a class="" href="../../openshift_images/triggering-updates-on-imagestream-changes.html">Triggering updates on image stream changes</a></li>
            <li><a class="" href="../../openshift_images/image-configuration.html">Image configuration resources</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-17-9"><span id="sgSpan-17-9" class="fa fa-caret-right"></span>&nbsp;Using images</a>
              <ul id="topicSubGroup-17-9" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../openshift_images/using_images/using-images-overview.html">Using images overview</a></li>
                  <li><a class="" href="../../openshift_images/using_images/using-s21-images.html">Source-to-image</a></li>
                  <li><a class="" href="../../openshift_images/using_images/customizing-s2i-images.html">Customizing source-to-image images</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup18"><span id="tgSpan18" class="fa fa-angle-right"></span>Add-on services</a>
      <ul id="topicGroup18" class="collapse  list-unstyled">
            <li><a class="" href="../../adding_service_cluster/adding-service.html">Adding services to a cluster</a></li>
            <li><a class="" href="../../adding_service_cluster/available-services.html">Available services</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup19"><span id="tgSpan19" class="fa fa-angle-right"></span>Storage</a>
      <ul id="topicGroup19" class="collapse  list-unstyled">
            <li><a class="" href="../../storage/index.html">Storage overview</a></li>
            <li><a class="" href="../../storage/understanding-ephemeral-storage.html">Understanding ephemeral storage</a></li>
            <li><a class="" href="../../storage/understanding-persistent-storage.html">Understanding persistent storage</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-19-3"><span id="sgSpan-19-3" class="fa fa-caret-right"></span>&nbsp;Configuring persistent storage</a>
              <ul id="topicSubGroup-19-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../storage/persistent_storage/persistent-storage-aws.html">Persistent storage using AWS Elastic Block Store</a></li>
                  <li><a class="" href="../../storage/persistent_storage/persistent-storage-gce.html">Persistent storage using GCE Persistent Disk</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-19-4"><span id="sgSpan-19-4" class="fa fa-caret-right"></span>&nbsp;Using Container Storage Interface (CSI)</a>
              <ul id="topicSubGroup-19-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../storage/container_storage_interface/persistent-storage-csi.html">Configuring CSI volumes</a></li>
                  <li><a class="" href="../../storage/container_storage_interface/persistent-storage-csi-sc-manage.html">Managing the default storage class</a></li>
                  <li><a class="" href="../../storage/container_storage_interface/persistent-storage-csi-ebs.html">AWS Elastic Block Store CSI Driver Operator</a></li>
                  <li><a class="" href="../../storage/container_storage_interface/persistent-storage-csi-aws-efs.html">AWS Elastic File Service CSI Driver Operator</a></li>
                  <li><a class="" href="../../storage/container_storage_interface/persistent-storage-csi-gcp-pd.html">GCP PD CSI Driver Operator</a></li>
                  <li><a class="" href="../../storage/container_storage_interface/persistent-storage-csi-google-cloud-file.html">GCP Filestore CSI Driver Operator</a></li>              </ul>
            </li>
            <li><a class="" href="../../storage/generic-ephemeral-vols.html">Generic ephemeral volumes</a></li>
            <li><a class="" href="../../storage/dynamic-provisioning.html">Dynamic provisioning</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup20"><span id="tgSpan20" class="fa fa-angle-right"></span>Registry</a>
      <ul id="topicGroup20" class="collapse  list-unstyled">
            <li><a class="" href="../../registry/index.html">Registry overview</a></li>
            <li><a class="" href="../../registry/configuring-registry-operator.html">Image Registry Operator in OpenShift Dedicated</a></li>
            <li><a class="" href="../../registry/accessing-the-registry.html">Accessing the registry</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup21"><span id="tgSpan21" class="fa fa-angle-right"></span>Operators</a>
      <ul id="topicGroup21" class="collapse  list-unstyled">
            <li><a class="" href="../../operators/index.html">Operators overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-21-1"><span id="sgSpan-21-1" class="fa fa-caret-right"></span>&nbsp;Understanding Operators</a>
              <ul id="topicSubGroup-21-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../operators/understanding/olm-what-operators-are.html">What are Operators?</a></li>
                  <li><a class="" href="../../operators/understanding/olm-packaging-format.html">Packaging format</a></li>
                  <li><a class="" href="../../operators/understanding/olm-common-terms.html">Common terms</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-21-1-3"><span id="ssgSpan-21-1-3" class="fa fa-caret-right"></span>&nbsp;Operator Lifecycle Manager (OLM)</a>
                  <ul id="topicSubSubGroup-21-1-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../operators/understanding/olm/olm-understanding-olm.html" style="padding-left: 70px;">Concepts and resources</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-arch.html" style="padding-left: 70px;">Architecture</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-workflow.html" style="padding-left: 70px;">Workflow</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-understanding-dependency-resolution.html" style="padding-left: 70px;">Dependency resolution</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-understanding-operatorgroups.html" style="padding-left: 70px;">Operator groups</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-colocation.html" style="padding-left: 70px;">Multitenancy and Operator colocation</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-operatorconditions.html" style="padding-left: 70px;">Operator conditions</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-understanding-metrics.html" style="padding-left: 70px;">Metrics</a></li>
                    <li><a class="" href="../../operators/understanding/olm/olm-webhooks.html" style="padding-left: 70px;">Webhooks</a></li>                  </ul>
                  </li>

                  <li><a class="" href="../../operators/understanding/olm-understanding-operatorhub.html">OperatorHub</a></li>
                  <li><a class="" href="../../operators/understanding/olm-rh-catalogs.html">Red Hat-provided Operator catalogs</a></li>
                  <li><a class="" href="../../operators/understanding/olm-multitenancy.html">Operators in multitenant clusters</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-21-1-7"><span id="ssgSpan-21-1-7" class="fa fa-caret-right"></span>&nbsp;CRDs</a>
                  <ul id="topicSubSubGroup-21-1-7" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../operators/understanding/crds/crd-managing-resources-from-crds.html" style="padding-left: 70px;">Managing resources from CRDs</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-21-2"><span id="sgSpan-21-2" class="fa fa-caret-right"></span>&nbsp;User tasks</a>
              <ul id="topicSubGroup-21-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../operators/user/olm-creating-apps-from-installed-operators.html">Creating applications from installed Operators</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-21-3"><span id="sgSpan-21-3" class="fa fa-caret-right"></span>&nbsp;Administrator tasks</a>
              <ul id="topicSubGroup-21-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../operators/admin/olm-adding-operators-to-cluster.html">Adding Operators to a cluster</a></li>
                  <li><a class="" href="../../operators/admin/olm-upgrading-operators.html">Updating installed Operators</a></li>
                  <li><a class="" href="../../operators/admin/olm-deleting-operators-from-cluster.html">Deleting Operators from a cluster</a></li>
                  <li><a class="" href="../../operators/admin/olm-configuring-proxy-support.html">Configuring proxy support</a></li>
                  <li><a class="" href="../../operators/admin/olm-status.html">Viewing Operator status</a></li>
                  <li><a class="" href="../../operators/admin/olm-managing-operatorconditions.html">Managing Operator conditions</a></li>
                  <li><a class="" href="../../operators/admin/olm-managing-custom-catalogs.html">Managing custom catalogs</a></li>
                  <li><a class="" href="../../operators/admin/olm-cs-podsched.html">Catalog source pod scheduling</a></li>
                  <li><a class="" href="../../operators/admin/olm-troubleshooting-operator-issues.html">Troubleshooting Operator issues</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-21-4"><span id="sgSpan-21-4" class="fa fa-caret-right"></span>&nbsp;Developing Operators</a>
              <ul id="topicSubGroup-21-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../operators/operator_sdk/osdk-about.html">About the Operator SDK</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-installing-cli.html">Installing the Operator SDK CLI</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-21-4-2"><span id="ssgSpan-21-4-2" class="fa fa-caret-right"></span>&nbsp;Go-based Operators</a>
                  <ul id="topicSubSubGroup-21-4-2" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../operators/operator_sdk/golang/osdk-golang-tutorial.html" style="padding-left: 70px;">Tutorial</a></li>
                    <li><a class="" href="../../operators/operator_sdk/golang/osdk-golang-project-layout.html" style="padding-left: 70px;">Project layout</a></li>
                    <li><a class="" href="../../operators/operator_sdk/golang/osdk-golang-updating-projects.html" style="padding-left: 70px;">Updating Go-based projects</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-21-4-3"><span id="ssgSpan-21-4-3" class="fa fa-caret-right"></span>&nbsp;Ansible-based Operators</a>
                  <ul id="topicSubSubGroup-21-4-3" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-tutorial.html" style="padding-left: 70px;">Tutorial</a></li>
                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-project-layout.html" style="padding-left: 70px;">Project layout</a></li>
                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-updating-projects.html" style="padding-left: 70px;">Updating Ansible-based projects</a></li>
                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-support.html" style="padding-left: 70px;">Ansible support</a></li>
                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-k8s-collection.html" style="padding-left: 70px;">Kubernetes Collection for Ansible</a></li>
                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-inside-operator.html" style="padding-left: 70px;">Using Ansible inside an Operator</a></li>
                    <li><a class="" href="../../operators/operator_sdk/ansible/osdk-ansible-cr-status.html" style="padding-left: 70px;">Custom resource status management</a></li>                  </ul>
                  </li>

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-21-4-4"><span id="ssgSpan-21-4-4" class="fa fa-caret-right"></span>&nbsp;Helm-based Operators</a>
                  <ul id="topicSubSubGroup-21-4-4" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../operators/operator_sdk/helm/osdk-helm-tutorial.html" style="padding-left: 70px;">Tutorial</a></li>
                    <li><a class="" href="../../operators/operator_sdk/helm/osdk-helm-project-layout.html" style="padding-left: 70px;">Project layout</a></li>
                    <li><a class="" href="../../operators/operator_sdk/helm/osdk-helm-updating-projects.html" style="padding-left: 70px;">Updating Helm-based projects</a></li>
                    <li><a class="" href="../../operators/operator_sdk/helm/osdk-helm-support.html" style="padding-left: 70px;">Helm support</a></li>                  </ul>
                  </li>

                  <li><a class="" href="../../operators/operator_sdk/osdk-generating-csvs.html">Defining cluster service versions (CSVs)</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-working-bundle-images.html">Working with bundle images</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-complying-with-psa.html">Complying with pod security admission</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-scorecard.html">Validating Operators using the scorecard</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-bundle-validate.html">Validating Operator bundles</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-ha-sno.html">High-availability or single-node cluster detection and support</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-monitoring-prometheus.html">Configuring built-in monitoring with Prometheus</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-leader-election.html">Configuring leader election</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-pruning-utility.html">Object pruning utility</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-pkgman-to-bundle.html">Migrating package manifest projects to bundle format</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-cli-ref.html">Operator SDK CLI reference</a></li>
                  <li><a class="" href="../../operators/operator_sdk/osdk-migrating-to-v0-1-0.html">Migrating to Operator SDK v0.1.0</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup22"><span id="tgSpan22" class="fa fa-angle-right"></span>Networking</a>
      <ul id="topicGroup22" class="collapse  list-unstyled">
            <li><a class="" href="../../networking/about-managed-networking.html">About networking</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-22-1"><span id="sgSpan-22-1" class="fa fa-caret-right"></span>&nbsp;Networking Operators</a>
              <ul id="topicSubGroup-22-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../networking/networking_operators/dns-operator.html">DNS Operator in OpenShift Dedicated</a></li>
                  <li><a class="" href="../../networking/networking_operators/ingress-operator.html">Ingress Operator in OpenShift Dedicated</a></li>              </ul>
            </li>
            <li><a class="" href="../../networking/network-verification.html">Network verification</a></li>
            <li><a class="" href="../../networking/configuring-cluster-wide-proxy.html">Configuring a cluster-wide proxy during installation</a></li>
            <li><a class="" href="../../networking/cidr-range-definitions.html">CIDR range definitions</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-22-5"><span id="sgSpan-22-5" class="fa fa-caret-right"></span>&nbsp;Network security</a>
              <ul id="topicSubGroup-22-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../networking/network_security/network-policy-apis.html">Understanding network policy APIs</a></li>
                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-22-5-1"><span id="ssgSpan-22-5-1" class="fa fa-caret-right"></span>&nbsp;Network policy</a>
                  <ul id="topicSubSubGroup-22-5-1" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../networking/network_security/network_policy/about-network-policy.html" style="padding-left: 70px;">About network policy</a></li>
                    <li><a class="" href="../../networking/network_security/network_policy/creating-network-policy.html" style="padding-left: 70px;">Creating a network policy</a></li>
                    <li><a class="" href="../../networking/network_security/network_policy/viewing-network-policy.html" style="padding-left: 70px;">Viewing a network policy</a></li>
                    <li><a class="" href="../../networking/network_security/network_policy/deleting-network-policy.html" style="padding-left: 70px;">Deleting a network policy</a></li>
                    <li><a class="" href="../../networking/network_security/network_policy/multitenant-network-policy.html" style="padding-left: 70px;">Configuring multitenant isolation with network policy</a></li>                  </ul>
                  </li>
              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-22-6"><span id="sgSpan-22-6" class="fa fa-caret-right"></span>&nbsp;OVN-Kubernetes network plugin</a>
              <ul id="topicSubGroup-22-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../networking/ovn_kubernetes_network_provider/about-ovn-kubernetes.html">About the OVN-Kubernetes network plugin</a></li>
                  <li><a class="" href="../../networking/ovn_kubernetes_network_provider/migrate-from-openshift-sdn-osd.html">Migrating from the OpenShift SDN network plugin</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-22-7"><span id="sgSpan-22-7" class="fa fa-caret-right"></span>&nbsp;OpenShift SDN network plugin</a>
              <ul id="topicSubGroup-22-7" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../networking/ovn_kubernetes_network_provider/enabling-multicast.html">Enabling multicast for a project</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-22-8"><span id="sgSpan-22-8" class="fa fa-caret-right"></span>&nbsp;Configuring Routes</a>
              <ul id="topicSubGroup-22-8" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../networking/routes/route-configuration.html">Route configuration</a></li>
                  <li><a class="" href="../../networking/routes/secured-routes.html">Secured routes</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup23"><span id="tgSpan23" class="fa fa-angle-right"></span>Building applications</a>
      <ul id="topicGroup23" class="collapse  list-unstyled">
            <li><a class="" href="../../applications/index.html">Building applications overview</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-23-1"><span id="sgSpan-23-1" class="fa fa-caret-right"></span>&nbsp;Projects</a>
              <ul id="topicSubGroup-23-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../applications/projects/working-with-projects.html">Working with projects</a></li>
                  <li><a class="" href="../../applications/projects/configuring-project-creation.html">Configuring project creation</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-23-2"><span id="sgSpan-23-2" class="fa fa-caret-right"></span>&nbsp;Creating applications</a>
              <ul id="topicSubGroup-23-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../applications/creating_applications/using-templates.html">Using templates</a></li>
                  <li><a class="" href="../../applications/creating_applications/odc-creating-applications-using-developer-perspective.html">Creating applications using the Developer perspective</a></li>
                  <li><a class="" href="../../applications/creating_applications/creating-apps-from-installed-operators.html">Creating applications from installed Operators</a></li>
                  <li><a class="" href="../../applications/creating_applications/creating-applications-using-cli.html">Creating applications using the CLI</a></li>
                  <li><a class="" href="../../applications/creating_applications/templates-using-ruby-on-rails.html">Creating applications using Ruby on Rails</a></li>              </ul>
            </li>
            <li><a class="" href="../../applications/odc-viewing-application-composition-using-topology-view.html">Viewing application composition using the Topology view</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-23-4"><span id="sgSpan-23-4" class="fa fa-caret-right"></span>&nbsp;Working with Helm charts</a>
              <ul id="topicSubGroup-23-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../applications/working_with_helm_charts/understanding-helm.html">Understanding Helm</a></li>
                  <li><a class="" href="../../applications/working_with_helm_charts/installing-helm.html">Installing Helm</a></li>
                  <li><a class="" href="../../applications/working_with_helm_charts/configuring-custom-helm-chart-repositories.html">Configuring custom Helm chart repositories</a></li>
                  <li><a class="" href="../../applications/working_with_helm_charts/odc-working-with-helm-releases.html">Working with Helm releases</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-23-5"><span id="sgSpan-23-5" class="fa fa-caret-right"></span>&nbsp;Deployments</a>
              <ul id="topicSubGroup-23-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../applications/deployments/osd-config-custom-domains-applications.html">Custom domains for applications</a></li>
                  <li><a class="" href="../../applications/deployments/what-deployments-are.html">Understanding Deployments and DeploymentConfigs</a></li>
                  <li><a class="" href="../../applications/deployments/managing-deployment-processes.html">Managing deployment processes</a></li>
                  <li><a class="" href="../../applications/deployments/deployment-strategies.html">Using deployment strategies</a></li>
                  <li><a class="" href="../../applications/deployments/route-based-deployment-strategies.html">Using route-based deployment strategies</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-23-6"><span id="sgSpan-23-6" class="fa fa-caret-right"></span>&nbsp;Quotas</a>
              <ul id="topicSubGroup-23-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../applications/quotas/quotas-setting-per-project.html">Resource quotas per project</a></li>
                  <li><a class="" href="../../applications/quotas/quotas-setting-across-multiple-projects.html">Resource quotas across multiple projects</a></li>              </ul>
            </li>
            <li><a class="" href="../../applications/config-maps.html">Using config maps with applications</a></li>
            <li><a class="" href="../../applications/odc-monitoring-project-and-application-metrics-using-developer-perspective.html">Monitoring project and application metrics using the Developer perspective</a></li>
            <li><a class="" href="../../applications/application-health.html">Monitoring application health</a></li>
            <li><a class="" href="../../applications/odc-editing-applications.html">Editing applications</a></li>
            <li><a class="" href="../../applications/working-with-quotas.html">Working with quotas</a></li>
            <li><a class="" href="../../applications/pruning-objects.html">Pruning objects to reclaim resources</a></li>
            <li><a class="" href="../../applications/idling-applications.html">Idling applications</a></li>
            <li><a class="" href="../../applications/odc-deleting-applications.html">Deleting applications</a></li>
            <li><a class="" href="../../applications/red-hat-marketplace.html">Using the Red Hat Marketplace</a></li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup24"><span id="tgSpan24" class="fa fa-angle-right"></span>Nodes</a>
      <ul id="topicGroup24" class="collapse  list-unstyled">
            <li><a class="" href="../../nodes/index.html">Overview of nodes</a></li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-1"><span id="sgSpan-24-1" class="fa fa-caret-right"></span>&nbsp;Working with pods</a>
              <ul id="topicSubGroup-24-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../nodes/pods/nodes-pods-using.html">About pods</a></li>
                  <li><a class="" href="../../nodes/pods/nodes-pods-viewing.html">Viewing pods</a></li>
                  <li><a class="" href="../../nodes/pods/nodes-pods-configuring.html">Configuring a cluster for pods</a></li>
                  <li><a class="" href="../../nodes/pods/nodes-pods-secrets.html">Providing sensitive data to pods</a></li>
                  <li><a class="" href="../../nodes/pods/nodes-pods-configmaps.html">Creating and using config maps</a></li>
                  <li><a class="" href="../../nodes/pods/nodes-pods-priority.html">Including pod priority in pod scheduling decisions</a></li>
                  <li><a class="" href="../../nodes/pods/nodes-pods-node-selectors.html">Placing pods on specific nodes using node selectors</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-2"><span id="sgSpan-24-2" class="fa fa-caret-right"></span>&nbsp;Automatically scaling pods with the Custom Metrics Autoscaler Operator</a>
              <ul id="topicSubGroup-24-2" class="nav-tertiary list-unstyled collapse">

                <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubSubGroup-24-2-0"><span id="ssgSpan-24-2-0" class="fa fa-caret-right"></span>&nbsp;Release notes</a>
                  <ul id="topicSubSubGroup-24-2-0" class="nav-tertiary list-unstyled collapse">

                    <li><a class="" href="../../nodes/cma/nodes-cma-rn/nodes-cma-autoscaling-custom-rn.html" style="padding-left: 70px;">Custom Metrics Autoscaler Operator release notes</a></li>
                    <li><a class="" href="../../nodes/cma/nodes-cma-rn/nodes-cma-autoscaling-custom-rn-past.html" style="padding-left: 70px;">Past releases</a></li>                  </ul>
                  </li>

                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom.html">Custom Metrics Autoscaler Operator overview</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-install.html">Installing the custom metrics autoscaler</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-trigger.html">Understanding the custom metrics autoscaler triggers</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-trigger-auth.html">Understanding the custom metrics autoscaler trigger authentications</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-pausing.html">Pausing the custom metrics autoscaler</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-audit-log.html">Gathering audit logs</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-debugging.html">Gathering debugging data</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-metrics.html">Viewing Operator metrics</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-adding.html">Understanding how to add custom metrics autoscalers</a></li>
                  <li><a class="" href="../../nodes/cma/nodes-cma-autoscaling-custom-removing.html">Removing the Custom Metrics Autoscaler Operator</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-3"><span id="sgSpan-24-3" class="fa fa-caret-right"></span>&nbsp;Controlling pod placement onto nodes (scheduling)</a>
              <ul id="topicSubGroup-24-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../nodes/scheduling/nodes-scheduler-about.html">About pod placement using the scheduler</a></li>
                  <li><a class="" href="../../nodes/scheduling/nodes-scheduler-pod-affinity.html">Placing pods relative to other pods using pod affinity and anti-affinity rules</a></li>
                  <li><a class="" href="../../nodes/scheduling/nodes-scheduler-node-affinity.html">Controlling pod placement on nodes using node affinity rules</a></li>
                  <li><a class="" href="../../nodes/scheduling/nodes-scheduler-overcommit.html">Placing pods onto overcommited nodes</a></li>
                  <li><a class="" href="../../nodes/scheduling/nodes-scheduler-node-selectors.html">Placing pods on specific nodes using node selectors</a></li>
                  <li><a class="" href="../../nodes/scheduling/nodes-scheduler-pod-topology-spread-constraints.html">Controlling pod placement using pod topology spread constraints</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-4"><span id="sgSpan-24-4" class="fa fa-caret-right"></span>&nbsp;Using jobs and daemon sets</a>
              <ul id="topicSubGroup-24-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../nodes/jobs/nodes-pods-daemonsets.html">Running background tasks on nodes automatically with daemon sets</a></li>
                  <li><a class="" href="../../nodes/jobs/nodes-nodes-jobs.html">Running tasks in pods using jobs</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-5"><span id="sgSpan-24-5" class="fa fa-caret-right"></span>&nbsp;Working with nodes</a>
              <ul id="topicSubGroup-24-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../nodes/nodes/nodes-nodes-viewing.html">Viewing and listing the nodes in your cluster</a></li>
                  <li><a class="" href="../../nodes/nodes/nodes-node-tuning-operator.html">Using the Node Tuning Operator</a></li>
                  <li><a class="" href="../../nodes/nodes/nodes-remediating-fencing-maintaining-rhwa.html">Remediating, fencing, and maintaining nodes</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-6"><span id="sgSpan-24-6" class="fa fa-caret-right"></span>&nbsp;Working with containers</a>
              <ul id="topicSubGroup-24-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../nodes/containers/nodes-containers-using.html">Understanding containers</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-init.html">Using Init Containers to perform tasks before a pod is deployed</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-volumes.html">Using volumes to persist container data</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-projected-volumes.html">Mapping volumes using projected volumes</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-downward-api.html">Allowing containers to consume API objects</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-copying-files.html">Copying files to or from a container</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-remote-commands.html">Executing remote commands in a container</a></li>
                  <li><a class="" href="../../nodes/containers/nodes-containers-port-forwarding.html">Using port forwarding to access applications in a container</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-24-7"><span id="sgSpan-24-7" class="fa fa-caret-right"></span>&nbsp;Working with clusters</a>
              <ul id="topicSubGroup-24-7" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../nodes/clusters/nodes-containers-events.html">Viewing system event information in a cluster</a></li>
                  <li><a class="" href="../../nodes/clusters/nodes-cluster-resource-levels.html">Analyzing cluster resource levels</a></li>
                  <li><a class="" href="../../nodes/clusters/nodes-cluster-limit-ranges.html">Setting limit ranges</a></li>
                  <li><a class="" href="../../nodes/clusters/nodes-cluster-resource-configure.html">Configuring cluster memory to meet container memory and risk requirements</a></li>
                  <li><a class="" href="../../nodes/clusters/nodes-cluster-overcommit.html">Configuring your cluster to place pods on overcommited nodes</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup25"><span id="tgSpan25" class="fa fa-angle-down"></span>Observability</a>
      <ul id="topicGroup25" class="collapse in list-unstyled">
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-25-0"><span id="sgSpan-25-0" class="fa fa-caret-right"></span>&nbsp;Observability overview</a>
              <ul id="topicSubGroup-25-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../observability/overview/index.html">About Observability</a></li>              </ul>
            </li>
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-25-1"><span id="sgSpan-25-1" class="fa fa-caret-down"></span>&nbsp;Monitoring</a>
              <ul id="topicSubGroup-25-1" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../observability/monitoring/monitoring-overview.html">Monitoring overview</a></li>
                  <li><a class="" href="../../observability/monitoring/sd-accessing-monitoring-for-user-defined-projects.html">Accessing monitoring for user-defined projects</a></li>
                  <li><a class=" active" href="../../observability/monitoring/configuring-the-monitoring-stack.html">Configuring the monitoring stack</a></li>
                  <li><a class="" href="../../observability/monitoring/sd-disabling-monitoring-for-user-defined-projects.html">Disabling monitoring for user-defined projects</a></li>
                  <li><a class="" href="../../observability/monitoring/enabling-alert-routing-for-user-defined-projects.html">Enabling alert routing for user-defined projects</a></li>
                  <li><a class="" href="../../observability/monitoring/managing-metrics.html">Managing metrics</a></li>
                  <li><a class="" href="../../observability/monitoring/managing-alerts.html">Managing alerts</a></li>
                  <li><a class="" href="../../observability/monitoring/reviewing-monitoring-dashboards.html">Reviewing monitoring dashboards</a></li>
                  <li><a class="" href="../../observability/monitoring/accessing-third-party-monitoring-apis.html">Accessing third-party monitoring APIs</a></li>
                  <li><a class="" href="../../observability/monitoring/troubleshooting-monitoring-issues.html">Troubleshooting monitoring issues</a></li>
                  <li><a class="" href="../../observability/monitoring/config-map-reference-for-the-cluster-monitoring-operator.html">Config map reference for the Cluster Monitoring Operator</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup26"><span id="tgSpan26" class="fa fa-angle-right"></span>Service Mesh</a>
      <ul id="topicGroup26" class="collapse  list-unstyled">
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-26-0"><span id="sgSpan-26-0" class="fa fa-caret-right"></span>&nbsp;Service Mesh 2.x</a>
              <ul id="topicSubGroup-26-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../service_mesh/v2x/ossm-about.html">About OpenShift Service Mesh</a></li>
                  <li><a class="" href="../../service_mesh/v2x/servicemesh-release-notes.html">Service Mesh 2.x release notes</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-architecture.html">Service Mesh architecture</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-deployment-models.html">Service Mesh deployment models</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-vs-community.html">Service Mesh and Istio differences</a></li>
                  <li><a class="" href="../../service_mesh/v2x/preparing-ossm-installation.html">Preparing to install Service Mesh</a></li>
                  <li><a class="" href="../../service_mesh/v2x/installing-ossm.html">Installing the Operators</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-create-smcp.html">Creating the ServiceMeshControlPlane</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-create-mesh.html">Adding workloads to a service mesh</a></li>
                  <li><a class="" href="../../service_mesh/v2x/prepare-to-deploy-applications-ossm.html">Enabling sidecar injection</a></li>
                  <li><a class="" href="../../service_mesh/v2x/upgrading-ossm.html">Upgrading Service Mesh</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-profiles-users.html">Managing users and profiles</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-security.html">Security</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-traffic-manage.html">Traffic management</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-observability.html">Metrics, logs, and traces</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-performance-scalability.html">Performance and scalability</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-deploy-production.html">Deploying to production</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-federation.html">Federation</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-extensions.html">Extensions</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-threescale-webassembly-module.html">3scale WebAssembly for 2.1</a></li>
                  <li><a class="" href="../../service_mesh/v2x/threescale-adapter.html">3scale Istio adapter for 2.0</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-troubleshooting-istio.html">Troubleshooting Service Mesh</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-reference-smcp.html">Control plane configuration reference</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-reference-kiali.html">Kiali configuration reference</a></li>
                  <li><a class="" href="../../service_mesh/v2x/ossm-reference-jaeger.html">Jaeger configuration reference</a></li>
                  <li><a class="" href="../../service_mesh/v2x/removing-ossm.html">Uninstalling Service Mesh</a></li>              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup27"><span id="tgSpan27" class="fa fa-angle-right"></span>Serverless</a>
      <ul id="topicGroup27" class="collapse  list-unstyled">
            <li class="nav-header"><a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-27-0"><span id="sgSpan-27-0" class="fa fa-caret-right"></span>&nbsp;About Serverless</a>
              <ul id="topicSubGroup-27-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../serverless/about/about-serverless.html">Serverless overview</a></li>              </ul>
            </li>
      </ul>
    </li>
</ul>
      </div>
      <div id="hc-search-modal">
        <div id="hc-modal-content">
          <span id="hc-modal-close">&times;</span>
          <div id="hc-search-results-wrapper">
            <div id="hc-search-results"></div>
            <div id="hc-search-progress-indicator" class="text-center search-progress-indicator"><i class="fa fa-circle-o-notch fa-spin" style="font-size:42px"></i></div>
            <div class="text-center">
              <button id="hc-search-more-btn">Show more results</button>
            </div>
          </div>
        </div>
      </div>
      <div class="print-logo" style="display:none;">
        <img src="https://www.redhat.com/cms/managed-files/Logo-Red_Hat-OpenShift-A-Standard-RGB_0_0.svg" alt="print logo"/>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h1>
            Configuring the monitoring stack
          </h1>
        </div>
        
        
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#maintenance-and-support_configuring-the-monitoring-stack">Maintenance and support for monitoring</a>
<ul class="sectlevel2">
<li><a href="#support-considerations_configuring-the-monitoring-stack">Support considerations for monitoring</a></li>
<li><a href="#support-version-matrix-for-monitoring-components_configuring-the-monitoring-stack">Support version matrix for monitoring components</a></li>
</ul>
</li>
<li><a href="#configuring-the-monitoring-stack_configuring-the-monitoring-stack">Configuring the monitoring stack</a></li>
<li><a href="#configurable-monitoring-components_configuring-the-monitoring-stack">Configurable monitoring components</a></li>
<li><a href="#using-node-selectors-to-move-monitoring-components_configuring-the-monitoring-stack">Using node selectors to move monitoring components</a>
<ul class="sectlevel2">
<li><a href="#moving-monitoring-components-to-different-nodes_configuring-the-monitoring-stack">Moving monitoring components to different nodes</a></li>
</ul>
</li>
<li><a href="#assigning-tolerations-to-monitoring-components_configuring-the-monitoring-stack">Assigning tolerations to monitoring components</a></li>
<li><a href="#managing-cpu-and-memory-resources-for-monitoring-components">Managing CPU and memory resources for monitoring components</a>
<ul class="sectlevel2">
<li><a href="#about-specifying-limits-and-requests-for-monitoring-components_configuring-the-monitoring-stack">About specifying limits and requests for monitoring components</a></li>
<li><a href="#specifying-limits-and-resource-requests-for-monitoring-components_configuring-the-monitoring-stack">Specifying limits and requests</a></li>
</ul>
</li>
<li><a href="#configuring-persistent-storage_configuring-the-monitoring-stack">Configuring persistent storage</a>
<ul class="sectlevel2">
<li><a href="#persistent-storage-prerequisites_configuring-the-monitoring-stack">Persistent storage prerequisites</a></li>
<li><a href="#configuring-a-persistent-volume-claim_configuring-the-monitoring-stack">Configuring a persistent volume claim</a></li>
<li><a href="#retention-time-and-size-for-prometheus-metrics-data_configuring-the-monitoring-stack">Retention time and size for Prometheus metrics</a></li>
<li><a href="#modifying-retention-time-and-size-for-prometheus-metrics-data_configuring-the-monitoring-stack">Modifying retention time and size for Prometheus metrics data</a></li>
<li><a href="#modifying-the-retention-time-for-thanos-ruler-metrics-data_configuring-the-monitoring-stack">Modifying the retention time for Thanos Ruler metrics data</a></li>
</ul>
</li>
<li><a href="#configuring-remote-write-storage_configuring-the-monitoring-stack">Configuring remote write storage</a>
<ul class="sectlevel2">
<li><a href="#supported-remote-write-authentication-settings_configuring-the-monitoring-stack">Supported remote write authentication settings</a></li>
<li><a href="#example-remote-write-authentication-settings_configuring-the-monitoring-stack">Example remote write authentication settings</a></li>
<li><a href="#example-remote-write-queue-configuration_configuring-the-monitoring-stack">Example remote write queue configuration</a></li>
</ul>
</li>
<li><a href="#adding-cluster-id-labels-to-metrics_configuring-the-monitoring-stack">Adding cluster ID labels to metrics</a>
<ul class="sectlevel2">
<li><a href="#creating-cluster-id-labels-for-metrics_configuring-the-monitoring-stack">Creating cluster ID labels for metrics</a></li>
</ul>
</li>
<li><a href="#controlling-the-impact-of-unbound-attributes-in-user-defined-projects_configuring-the-monitoring-stack">Controlling the impact of unbound metrics attributes in user-defined projects</a>
<ul class="sectlevel2">
<li><a href="#setting-scrape-and-evaluation-intervals-limits-for-user-defined-projects_configuring-the-monitoring-stack">Setting scrape intervals, evaluation intervals, and enforced limits for user-defined projects</a></li>
</ul>
</li>
<li><a href="#monitoring-configuring-external-alertmanagers_configuring-the-monitoring-stack">Configuring external Alertmanager instances</a></li>
<li><a href="#monitoring-configuring-secrets-for-alertmanager_configuring-the-monitoring-stack">Configuring secrets for Alertmanager</a>
<ul class="sectlevel2">
<li><a href="#monitoring-adding-a-secret-to-the-alertmanager-configuration_configuring-the-monitoring-stack">Adding a secret to the Alertmanager configuration</a></li>
</ul>
</li>
<li><a href="#attaching-additional-labels-to-your-time-series-and-alerts_configuring-the-monitoring-stack">Attaching additional labels to your time series and alerts</a></li>
<li><a href="#using-pod-topology-spread-constraints-for-monitoring_configuring-the-monitoring-stack">About pod topology spread constraints for monitoring</a>
<ul class="sectlevel2">
<li><a href="#configuring-pod-topology-spread-constraints_configuring-the-monitoring-stack">Configuring pod topology spread constraints</a></li>
</ul>
</li>
<li><a href="#setting-log-levels-for-monitoring-components_configuring-the-monitoring-stack">Setting log levels for monitoring components</a></li>
<li><a href="#setting-query-log-file-for-prometheus_configuring-the-monitoring-stack">Enabling the query log file for Prometheus</a></li>
</ul>
</div>
<div class="paragraph">
<p>This section explains what configuration is supported,
shows how to configure the monitoring stack for user-defined projects,
and demonstrates several common configuration scenarios.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Not all configuration parameters for the monitoring stack are exposed.
Only the parameters and fields listed in the <a href="../../observability/monitoring/config-map-reference-for-the-cluster-monitoring-operator.html#cluster-monitoring-operator-configuration-reference">Config map reference for the Cluster Monitoring Operator</a> are supported for configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maintenance-and-support_configuring-the-monitoring-stack"><a class="anchor" href="#maintenance-and-support_configuring-the-monitoring-stack"></a>Maintenance and support for monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Not all configuration options for the monitoring stack are exposed. The only supported way of configuring OpenShift Dedicated monitoring is by configuring the Cluster Monitoring Operator (CMO) using the options described in the <a href="../../observability/monitoring/config-map-reference-for-the-cluster-monitoring-operator.html#cluster-monitoring-operator-configuration-reference">Config map reference for the Cluster Monitoring Operator</a>. <strong>Do not use other configurations, as they are unsupported.</strong></p>
</div>
<div class="paragraph">
<p>Configuration paradigms might change across Prometheus releases, and such cases can only be handled gracefully if all configuration possibilities are controlled. If you use configurations other than those described in the <a href="../../observability/monitoring/config-map-reference-for-the-cluster-monitoring-operator.html#cluster-monitoring-operator-configuration-reference">Config map reference for the Cluster Monitoring Operator</a>, your changes will disappear because the CMO automatically reconciles any differences and resets any unsupported changes back to the originally defined state by default and by design.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Installing another Prometheus instance is not supported by the Red Hat Site Reliability Engineers (SRE).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="support-considerations_configuring-the-monitoring-stack"><a class="anchor" href="#support-considerations_configuring-the-monitoring-stack"></a>Support considerations for monitoring</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Backward compatibility for metrics, recording rules, or alerting rules is not guaranteed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following modifications are explicitly not supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Installing custom Prometheus instances on OpenShift Dedicated.</strong> A custom instance is a Prometheus custom resource (CR) managed by the Prometheus Operator.</p>
</li>
<li>
<p><strong>Modifying the default platform monitoring components.</strong> You should not modify any of the components defined in the <code>cluster-monitoring-config</code> config map. Red Hat SRE uses these components to monitor the core cluster components and Kubernetes services.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="support-version-matrix-for-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#support-version-matrix-for-monitoring-components_configuring-the-monitoring-stack"></a>Support version matrix for monitoring components</h3>
<div class="paragraph">
<p>The following matrix contains information about versions of monitoring components for OpenShift Dedicated 4.12 and later releases:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. OpenShift Dedicated and component versions</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OpenShift Dedicated</th>
<th class="tableblock halign-left valign-top">Prometheus Operator</th>
<th class="tableblock halign-left valign-top">Prometheus</th>
<th class="tableblock halign-left valign-top">Metrics Server</th>
<th class="tableblock halign-left valign-top">Alertmanager</th>
<th class="tableblock halign-left valign-top">kube-state-metrics agent</th>
<th class="tableblock halign-left valign-top">monitoring-plugin</th>
<th class="tableblock halign-left valign-top">node-exporter agent</th>
<th class="tableblock halign-left valign-top">Thanos</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.78.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.55.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.27.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.36.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.75.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.53.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.27.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.13.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.35.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.73.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.52.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.26.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.12.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.35.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.70.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.48.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.26.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.10.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.32.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.67.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.46.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.25.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.9.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.30.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.63.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.42.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.25.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.8.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.30.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.60.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.39.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.24.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.6.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.28.1</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The openshift-state-metrics agent and Telemeter Client are OpenShift-specific components. Therefore, their versions correspond with the versions of OpenShift Dedicated.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-monitoring-stack_configuring-the-monitoring-stack"><a class="anchor" href="#configuring-the-monitoring-stack_configuring-the-monitoring-stack"></a>Configuring the monitoring stack</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In OpenShift Dedicated, you can configure the stack that monitors workloads for user-defined projects by using the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object. Config maps configure the Cluster Monitoring Operator (CMO), which in turn configures the components of the stack.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>ConfigMap</code> object.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add your configuration under <code>data/config.yaml</code> as a key-value pair <code>&lt;component_name&gt;:&#160;&lt;component_configuration&gt;</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">&lt;component&gt;:</span>
      <span class="s">&lt;configuration_for_the_component&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Substitute <code>&lt;component&gt;</code> and <code>&lt;configuration_for_the_component&gt;</code> accordingly.</p>
</div>
<div class="paragraph">
<p>The following example <code>ConfigMap</code> object configures a data retention period and minimum container resource requests for Prometheus. This relates to the Prometheus instance that monitors user-defined projects only:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus: </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">retention: 24h </span><i class="conum" data-value="2"></i><b>(2)</b>
      <span class="s">resources:</span>
        <span class="s">requests:</span>
          <span class="s">cpu: 200m </span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="s">memory: 2Gi </span><i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines the Prometheus component and the subsequent lines define its configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configures a twenty-four hour data retention period for the Prometheus instance that monitors user-defined projects.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a minimum resource request of 200 millicores for the Prometheus container.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defines a minimum pod resource request of 2 GiB of memory for the Prometheus container.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Save the file to apply the changes to the <code>ConfigMap</code> object.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Different configuration changes to the <code>ConfigMap</code> object result in different outcomes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The pods are not redeployed. Therefore, there is no service outage.</p>
</li>
<li>
<p>The affected pods are redeployed:</p>
<div class="ulist">
<ul>
<li>
<p>For single-node clusters, this results in temporary service outage.</p>
</li>
<li>
<p>For multi-node clusters, because of high-availability, the affected pods are gradually rolled out and the monitoring stack remains available.</p>
</li>
<li>
<p>Configuring and resizing a persistent volume always results in a service outage, regardless of high availability.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each procedure that requires a change in the config map includes its expected outcome.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>Configuration reference for the <a href="../../observability/monitoring/config-map-reference-for-the-cluster-monitoring-operator.html#userworkloadconfiguration"><code>user-workload-monitoring-config</code></a> config map</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configurable-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#configurable-monitoring-components_configuring-the-monitoring-stack"></a>Configurable monitoring components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This table shows the monitoring components you can configure and the keys used to specify the components in the <code>user-workload-monitoring-config</code> config map.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not modify the monitoring components in the <code>cluster-monitoring-config</code> <code>ConfigMap</code> object. Red&#160;Hat Site Reliability Engineers (SRE) use these components to monitor the core cluster components and Kubernetes services.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Configurable monitoring components for user-defined projects</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">user-workload-monitoring-config config map key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prometheus Operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheusOperator</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prometheus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alertmanager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alertmanager</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thanos Ruler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>thanosRuler</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="using-node-selectors-to-move-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#using-node-selectors-to-move-monitoring-components_configuring-the-monitoring-stack"></a>Using node selectors to move monitoring components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By using the <code>nodeSelector</code> constraint with labeled nodes, you can move any of the monitoring stack components to specific nodes.
By doing so, you can control the placement and distribution of the monitoring components across a cluster.</p>
</div>
<div class="paragraph">
<p>By controlling placement and distribution of monitoring components, you can optimize system resource use, improve performance, and separate workloads based on specific requirements or policies.</p>
</div>
<h3 id="how-node-selectors-work-with-other-constraints" class="discrete">How node selectors work with other constraints</h3>
<div class="paragraph">
<p>If you move monitoring components by using node selector constraints, be aware that other constraints to control pod scheduling might exist for a cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Topology spread constraints might be in place to control pod placement.</p>
</li>
<li>
<p>Hard anti-affinity rules are in place for Prometheus, Alertmanager, and other monitoring components to ensure that multiple pods for these components are always spread across different nodes and are therefore always highly available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When scheduling pods onto nodes, the pod scheduler tries to satisfy all existing constraints when determining pod placement.
That is, all constraints compound when the pod scheduler determines which pods will be placed on which nodes.</p>
</div>
<div class="paragraph">
<p>Therefore, if you configure a node selector constraint but existing constraints cannot all be satisfied, the pod scheduler cannot match all constraints and will not schedule a pod for placement onto a node.</p>
</div>
<div class="paragraph">
<p>To maintain resilience and high availability for monitoring components, ensure that enough nodes are available and match all constraints when you configure a node selector constraint to move a component.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="../../observability/monitoring/configuring-the-monitoring-stack.html#using-pod-topology-spread-constraints-for-monitoring_configuring-the-monitoring-stack">Using pod topology spread constraints for monitoring</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector">Kubernetes documentation about node selectors</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="moving-monitoring-components-to-different-nodes_configuring-the-monitoring-stack"><a class="anchor" href="#moving-monitoring-components-to-different-nodes_configuring-the-monitoring-stack"></a>Moving monitoring components to different nodes</h3>
<div class="paragraph">
<p>You can move any of the components that monitor workloads for user-defined projects to specific worker nodes.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is not permitted to move components to control plane or infrastructure nodes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If you have not done so yet, add a label to the nodes on which you want to run the monitoring components:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc label nodes &lt;node_name&gt; &lt;node_label&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>&lt;node_name&gt;</code> with the name of the node where you want to add the label.
Replace <code>&lt;node_label&gt;</code> with the name of the wanted label.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Edit the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Specify the node labels for the <code>nodeSelector</code> constraint for the component under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s"># ...</span>
    <span class="s">&lt;component&gt;: </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">nodeSelector:</span>
        <span class="s">&lt;node_label_1&gt; </span><i class="conum" data-value="2"></i><b>(2)</b>
        <span class="s">&lt;node_label_2&gt; </span><i class="conum" data-value="3"></i><b>(3)</b>
    <span class="s"># ...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Substitute <code>&lt;component&gt;</code> with the appropriate monitoring stack component name.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Substitute <code>&lt;node_label_1&gt;</code> with the label you added to the node.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Optional: Specify additional labels.
If you specify additional labels, the pods for the component are only scheduled on the nodes that contain all of the specified labels.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If monitoring components remain in a <code>Pending</code> state after configuring the <code>nodeSelector</code> constraint, check the pod events for errors relating to taints and tolerations.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes. The components specified in the new configuration are automatically moved to the new nodes, and the pods affected by the new configuration are redeployed.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>See the <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector">Kubernetes documentation</a> for details on the <code>nodeSelector</code> constraint</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assigning-tolerations-to-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#assigning-tolerations-to-monitoring-components_configuring-the-monitoring-stack"></a>Assigning tolerations to monitoring components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can assign tolerations to the components that monitor user-defined projects, to enable moving them to tainted worker nodes. Scheduling is not permitted on control plane or infrastructure nodes.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists in the <code>openshift-user-workload-monitoring</code> namespace. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Specify <code>tolerations</code> for the component:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">&lt;component&gt;:</span>
      <span class="s">tolerations:</span>
        <span class="s">&lt;toleration_specification&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Substitute <code>&lt;component&gt;</code> and <code>&lt;toleration_specification&gt;</code> accordingly.</p>
</div>
<div class="paragraph">
<p>For example, <code>oc adm taint nodes node1 key1=value1:NoSchedule</code> adds a taint to <code>node1</code> with the key <code>key1</code> and the value <code>value1</code>. This prevents monitoring components from deploying pods on <code>node1</code> unless a toleration is configured for that taint. The following example configures the <code>thanosRuler</code> component to tolerate the example taint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">thanosRuler:</span>
      <span class="s">tolerations:</span>
      <span class="s">- key: "key1"</span>
        <span class="s">operator: "Equal"</span>
        <span class="s">value: "value1"</span>
        <span class="s">effect: "NoSchedule"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>See the <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">Kubernetes documentation</a> on taints and tolerations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-cpu-and-memory-resources-for-monitoring-components"><a class="anchor" href="#managing-cpu-and-memory-resources-for-monitoring-components"></a>Managing CPU and memory resources for monitoring components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can ensure that the containers that run monitoring components have enough CPU and memory resources by specifying values for resource limits and requests for those components.</p>
</div>
<div class="paragraph">
<p>You can configure these limits and requests for core platform monitoring components in the <code>openshift-monitoring</code> namespace and for the components that monitor user-defined projects in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="sect2">
<h3 id="about-specifying-limits-and-requests-for-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#about-specifying-limits-and-requests-for-monitoring-components_configuring-the-monitoring-stack"></a>About specifying limits and requests for monitoring components</h3>
<div class="paragraph">
<p>You can configure resource limits and requests for the following core platform monitoring components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alertmanager</p>
</li>
<li>
<p>kube-state-metrics</p>
</li>
<li>
<p>monitoring-plugin</p>
</li>
<li>
<p>node-exporter</p>
</li>
<li>
<p>openshift-state-metrics</p>
</li>
<li>
<p>Prometheus</p>
</li>
<li>
<p>Metrics Server</p>
</li>
<li>
<p>Prometheus Operator and its admission webhook service</p>
</li>
<li>
<p>Telemeter Client</p>
</li>
<li>
<p>Thanos Querier</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure resource limits and requests for the following components that monitor user-defined projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alertmanager</p>
</li>
<li>
<p>Prometheus</p>
</li>
<li>
<p>Thanos Ruler</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By defining the resource limits, you limit a container&#8217;s resource usage, which prevents the container from exceeding the specified maximum values for CPU and memory resources.</p>
</div>
<div class="paragraph">
<p>By defining the resource requests, you specify that a container can be scheduled only on a node that has enough CPU and memory resources available to match the requested resources.</p>
</div>
</div>
<div class="sect2">
<h3 id="specifying-limits-and-resource-requests-for-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#specifying-limits-and-resource-requests-for-monitoring-components_configuring-the-monitoring-stack"></a>Specifying limits and requests</h3>
<div class="paragraph">
<p>To configure CPU and memory resources, specify values for resource limits and requests in the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>cluster-admin</code> cluster role, or as a user with the <code>user-workload-monitoring-config-edit</code> role in the <code>openshift-user-workload-monitoring</code> project.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add values to define resource limits and requests for each component you want to configure.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that the value set for a limit is always higher than the value set for a request.
Otherwise, an error will occur, and the container will not run.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example of setting resource limits and requests</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">alertmanager:</span>
      <span class="s">resources:</span>
        <span class="s">limits:</span>
          <span class="s">cpu: 500m</span>
          <span class="s">memory: 1Gi</span>
        <span class="s">requests:</span>
          <span class="s">cpu: 200m</span>
          <span class="s">memory: 500Mi</span>
    <span class="s">prometheus:</span>
      <span class="s">resources:</span>
        <span class="s">limits:</span>
          <span class="s">cpu: 500m</span>
          <span class="s">memory: 3Gi</span>
        <span class="s">requests:</span>
          <span class="s">cpu: 200m</span>
          <span class="s">memory: 500Mi</span>
    <span class="s">thanosRuler:</span>
      <span class="s">resources:</span>
        <span class="s">limits:</span>
          <span class="s">cpu: 500m</span>
          <span class="s">memory: 1Gi</span>
        <span class="s">requests:</span>
          <span class="s">cpu: 200m</span>
          <span class="s">memory: 500Mi</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-persistent-storage_configuring-the-monitoring-stack"><a class="anchor" href="#configuring-persistent-storage_configuring-the-monitoring-stack"></a>Configuring persistent storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run cluster monitoring with persistent storage to gain the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Protect your metrics and alerting data from data loss by storing them in a persistent volume (PV). As a result, they can survive pods being restarted or recreated.</p>
</li>
<li>
<p>Avoid getting duplicate notifications and losing silences for alerts when the Alertmanager pods are restarted.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For production environments, it is highly recommended to configure persistent storage.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In multi-node clusters, you must configure persistent storage for Prometheus, Alertmanager, and Thanos Ruler to ensure high availability.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="persistent-storage-prerequisites_configuring-the-monitoring-stack"><a class="anchor" href="#persistent-storage-prerequisites_configuring-the-monitoring-stack"></a>Persistent storage prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>Use the block type of storage.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-a-persistent-volume-claim_configuring-the-monitoring-stack"><a class="anchor" href="#configuring-a-persistent-volume-claim_configuring-the-monitoring-stack"></a>Configuring a persistent volume claim</h3>
<div class="paragraph">
<p>To use a persistent volume (PV) for monitoring components, you must configure a persistent volume claim (PVC).</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add your PVC configuration for the component under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">&lt;component&gt;: </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">volumeClaimTemplate:</span>
        <span class="s">spec:</span>
          <span class="s">storageClassName: &lt;storage_class&gt; </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">resources:</span>
            <span class="s">requests:</span>
              <span class="s">storage: &lt;amount_of_storage&gt; </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the monitoring component for which you want to configure the PVC.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify an existing storage class. If a storage class is not specified, the default storage class is used.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify the amount of required storage.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example configures a PVC that claims persistent storage for
Thanos Ruler:</p>
</div>
<div class="listingblock">
<div class="title">Example PVC configuration</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">thanosRuler:</span>
      <span class="s">volumeClaimTemplate:</span>
        <span class="s">spec:</span>
          <span class="s">storageClassName: my-storage-class</span>
          <span class="s">resources:</span>
            <span class="s">requests:</span>
              <span class="s">storage: 10Gi</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Storage requirements for the <code>thanosRuler</code> component depend on the number of rules that are evaluated and how many samples each rule generates.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed and the new storage configuration is applied.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you update the config map with a PVC configuration, the affected <code>StatefulSet</code> object is recreated, resulting in a temporary service outage.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims">PersistentVolumeClaims</a>(Kubernetes documentation about how to specify <code>volumeClaimTemplate</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="retention-time-and-size-for-prometheus-metrics-data_configuring-the-monitoring-stack"><a class="anchor" href="#retention-time-and-size-for-prometheus-metrics-data_configuring-the-monitoring-stack"></a>Retention time and size for Prometheus metrics</h3>
<div class="paragraph">
<p>By default, Prometheus retains metrics data for the following durations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Core platform monitoring</strong>: 15 days</p>
</li>
<li>
<p><strong>Monitoring for user-defined projects</strong>: 24 hours</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can modify the retention time for the Prometheus instance to change how soon the data is deleted. You can also set the maximum amount of disk space the retained metrics data uses. If the data reaches this size limit, Prometheus deletes the oldest data first until the disk space used is again below the limit.</p>
</div>
<div class="paragraph">
<p>Note the following behaviors of these data retention settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The size-based retention policy applies to all data block directories in the <code>/prometheus</code> directory, including persistent blocks, write-ahead log (WAL) data, and m-mapped chunks.</p>
</li>
<li>
<p>Data in the <code>/wal</code> and <code>/head_chunks</code> directories counts toward the retention size limit, but Prometheus never purges data from these directories based on size- or time-based retention policies.
Thus, if you set a retention size limit lower than the maximum size set for the <code>/wal</code> and <code>/head_chunks</code> directories, you have configured the system not to retain any data blocks in the <code>/prometheus</code> data directories.</p>
</li>
<li>
<p>The size-based retention policy is applied only when Prometheus cuts a new data block, which occurs every two hours after the WAL contains at least three hours of data.</p>
</li>
<li>
<p>If you do not explicitly define values for either <code>retention</code> or <code>retentionSize</code>, retention time defaults to 15 days for core platform monitoring and 24 hours for user-defined project monitoring. Retention size is not set.</p>
</li>
<li>
<p>If you define values for both <code>retention</code> and <code>retentionSize</code>, both values apply.
If any data blocks exceed the defined retention time or the defined size limit, Prometheus purges these data blocks.</p>
</li>
<li>
<p>If you define a value for <code>retentionSize</code> and do not define <code>retention</code>, only the <code>retentionSize</code> value applies.</p>
</li>
<li>
<p>If you do not define a value for <code>retentionSize</code> and only define a value for <code>retention</code>, only the <code>retention</code> value applies.</p>
</li>
<li>
<p>If you set the <code>retentionSize</code> or <code>retention</code> value to <code>0</code>, the default settings apply. The default settings set retention time to 15 days for core platform monitoring and 24 hours for user-defined project monitoring. By default, retention size is not set.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Data compaction occurs every two hours. Therefore, a persistent volume (PV) might fill up before compaction, potentially exceeding the <code>retentionSize</code> limit. In such cases, the <code>KubePersistentVolumeFillingUp</code> alert fires until the space on a PV is lower than the <code>retentionSize</code> limit.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="modifying-retention-time-and-size-for-prometheus-metrics-data_configuring-the-monitoring-stack"><a class="anchor" href="#modifying-retention-time-and-size-for-prometheus-metrics-data_configuring-the-monitoring-stack"></a>Modifying retention time and size for Prometheus metrics data</h3>
<div class="paragraph">
<p>By default, Prometheus retains metrics data for
24 hours for monitoring for user-defined projects.
You can modify the retention time for the Prometheus instance to change when the data is deleted. You can also set the maximum amount of disk space the retained metrics data uses.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Data compaction occurs every two hours. Therefore, a persistent volume (PV) might fill up before compaction, potentially exceeding the <code>retentionSize</code> limit. In such cases, the <code>KubePersistentVolumeFillingUp</code> alert fires until the space on a PV is lower than the <code>retentionSize</code> limit.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add the retention time and size configuration under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">retention: &lt;time_specification&gt; </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">retentionSize: &lt;size_specification&gt; </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The retention time: a number directly followed by <code>ms</code> (milliseconds), <code>s</code> (seconds), <code>m</code> (minutes), <code>h</code> (hours), <code>d</code> (days), <code>w</code> (weeks), or <code>y</code> (years). You can also combine time values for specific times, such as <code>1h30m15s</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The retention size: a number directly followed by <code>B</code> (bytes), <code>KB</code> (kilobytes), <code>MB</code> (megabytes), <code>GB</code> (gigabytes), <code>TB</code> (terabytes), <code>PB</code> (petabytes), and <code>EB</code> (exabytes).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example sets the retention time to 24 hours and the retention size to 10 gigabytes for the Prometheus instance:</p>
</div>
<div class="listingblock">
<div class="title">Example of setting retention time for Prometheus</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">retention: 24h</span>
      <span class="s">retentionSize: 10GB</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="modifying-the-retention-time-for-thanos-ruler-metrics-data_configuring-the-monitoring-stack"><a class="anchor" href="#modifying-the-retention-time-for-thanos-ruler-metrics-data_configuring-the-monitoring-stack"></a>Modifying the retention time for Thanos Ruler metrics data</h3>
<div class="paragraph">
<p>By default, for user-defined projects, Thanos Ruler automatically retains metrics data for 24 hours. You can modify the retention time to change how long this data is retained by specifying a time value in the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add the retention time configuration under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">thanosRuler:</span>
      <span class="s">retention: &lt;time_specification&gt; </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the retention time in the following format: a number directly followed by <code>ms</code> (milliseconds), <code>s</code> (seconds), <code>m</code> (minutes), <code>h</code> (hours), <code>d</code> (days), <code>w</code> (weeks), or <code>y</code> (years).
You can also combine time values for specific times, such as <code>1h30m15s</code>.
The default is <code>24h</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example sets the retention time to 10 days for Thanos Ruler data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">thanosRuler:</span>
      <span class="s">retention: 10d</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="../../storage/understanding-persistent-storage.html#understanding-persistent-storage">Understanding persistent storage</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-remote-write-storage_configuring-the-monitoring-stack"><a class="anchor" href="#configuring-remote-write-storage_configuring-the-monitoring-stack"></a>Configuring remote write storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure remote write storage to enable Prometheus to send ingested metrics to remote systems for long-term storage. Doing so has no impact on how or for how long Prometheus stores metrics.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
<li>
<p>You have set up a remote write compatible endpoint (such as Thanos) and know the endpoint URL. See the <a href="https://prometheus.io/docs/operating/integrations/#remote-endpoints-and-storage">Prometheus remote endpoints and storage documentation</a> for information about endpoints that are compatible with the remote write feature.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Red&#160;Hat only provides information for configuring remote write senders and does not offer guidance on configuring receiver endpoints. Customers are responsible for setting up their own endpoints that are remote-write compatible. Issues with endpoint receiver configurations are not included in Red&#160;Hat production support.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>You have set up authentication credentials in a <code>Secret</code> object for the remote write endpoint. You must create the secret in the <code>openshift-user-workload-monitoring</code> namespace.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To reduce security risks, use HTTPS and authentication to send metrics to an endpoint.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add a <code>remoteWrite:</code> section under <code>data/config.yaml/prometheus</code>, as shown in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com" </span><i class="conum" data-value="1"></i><b>(1)</b>
        <span class="s">&lt;endpoint_authentication_credentials&gt; </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The URL of the remote write endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The authentication method and credentials for the endpoint.
Currently supported authentication methods are AWS Signature Version 4, authentication using HTTP in an <code>Authorization</code> request header, Basic authentication, OAuth 2.0, and TLS client.
See <em>Supported remote write authentication settings</em> for sample configurations of supported authentication methods.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add write relabel configuration values after the authentication credentials:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">&lt;endpoint_authentication_credentials&gt;</span>
        <span class="s">writeRelabelConfigs:</span>
        <span class="s">- &lt;your_write_relabel_configs&gt; </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add configuration for metrics that you want to send to the remote endpoint.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example of forwarding a single metric called <code>my_metric</code></div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">writeRelabelConfigs:</span>
        <span class="s">- sourceLabels: [__name__]</span>
          <span class="s">regex: 'my_metric'</span>
          <span class="s">action: keep</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example of forwarding metrics called <code>my_metric_1</code> and <code>my_metric_2</code> in <code>my_namespace</code> namespace</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">writeRelabelConfigs:</span>
        <span class="s">- sourceLabels: [__name__,namespace]</span>
          <span class="s">regex: '(my_metric_1|my_metric_2);my_namespace'</span>
          <span class="s">action: keep</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The new configuration is applied automatically.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="supported-remote-write-authentication-settings_configuring-the-monitoring-stack"><a class="anchor" href="#supported-remote-write-authentication-settings_configuring-the-monitoring-stack"></a>Supported remote write authentication settings</h3>
<div class="paragraph">
<p>You can use different methods to authenticate with a remote write endpoint. Currently supported authentication methods are AWS Signature Version 4, basic authentication, authorization, OAuth 2.0, and TLS client. The following table provides details about supported authentication methods for use with remote write.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Authentication method</th>
<th class="tableblock halign-left valign-top">Config map field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS Signature Version 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sigv4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This method uses AWS Signature Version 4 authentication to sign requests.
You cannot use this method simultaneously with authorization, OAuth 2.0, or Basic authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>basicAuth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic authentication sets the authorization header on every remote write request with the configured username and password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authorization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authorization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorization sets the <code>Authorization</code> header on every remote write request using the configured token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAuth 2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oauth2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An OAuth 2.0 configuration uses the client credentials grant type.
Prometheus fetches an access token from <code>tokenUrl</code> with the specified client ID and client secret to access the remote write endpoint.
You cannot use this method simultaneously with authorization, AWS Signature Version 4, or Basic authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlsConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A TLS client configuration specifies the CA certificate, the client certificate, and the client key file information used to authenticate with the remote write endpoint server using TLS.
The sample configuration assumes that you have already created a CA certificate file, a client certificate file, and a client key file.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="example-remote-write-authentication-settings_configuring-the-monitoring-stack"><a class="anchor" href="#example-remote-write-authentication-settings_configuring-the-monitoring-stack"></a>Example remote write authentication settings</h3>
<div class="paragraph">
<p>The following samples show different authentication settings you can use to connect to a remote write endpoint. Each sample also shows how to configure a corresponding <code>Secret</code> object that contains authentication credentials and other relevant settings. Each sample configures authentication for use with
monitoring for user-defined projects
in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="sect3">
<h4 id="remote-write-sample-yaml-aws-sigv4_configuring-the-monitoring-stack"><a class="anchor" href="#remote-write-sample-yaml-aws-sigv4_configuring-the-monitoring-stack"></a>Sample YAML for AWS Signature Version 4 authentication</h4>
<div class="paragraph">
<p>The following shows the settings for a <code>sigv4</code> secret named <code>sigv4-credentials</code> in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">sigv4-credentials</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">stringData</span><span class="pi">:</span>
  <span class="na">accessKey</span><span class="pi">:</span> <span class="s">&lt;AWS_access_key&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">secretKey</span><span class="pi">:</span> <span class="s">&lt;AWS_secret_key&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The AWS API access key.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The AWS API secret key.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following shows sample AWS Signature Version 4 remote write authentication settings that use a <code>Secret</code> object named <code>sigv4-credentials</code> in the <code>openshift-user-workload-monitoring</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://authorization.example.com/api/write"</span>
        <span class="s">sigv4:</span>
          <span class="s">region: &lt;AWS_region&gt; </span><i class="conum" data-value="1"></i><b>(1)</b>
          <span class="s">accessKey:</span>
            <span class="s">name: sigv4-credentials </span><i class="conum" data-value="2"></i><b>(2)</b>
            <span class="s">key: accessKey </span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="s">secretKey:</span>
            <span class="s">name: sigv4-credentials </span><i class="conum" data-value="2"></i><b>(2)</b>
            <span class="s">key: secretKey </span><i class="conum" data-value="4"></i><b>(4)</b>
          <span class="s">profile: &lt;AWS_profile_name&gt; </span><i class="conum" data-value="5"></i><b>(5)</b>
          <span class="s">roleArn: &lt;AWS_role_arn&gt; </span><i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The AWS region.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of the <code>Secret</code> object containing the AWS API access credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The key that contains the AWS API access key in the specified <code>Secret</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The key that contains the AWS API secret key in the specified <code>Secret</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The name of the AWS profile that is being used to authenticate.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The unique identifier for the Amazon Resource Name (ARN) assigned to your role.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="remote-write-sample-yaml-basic-auth_configuring-the-monitoring-stack"><a class="anchor" href="#remote-write-sample-yaml-basic-auth_configuring-the-monitoring-stack"></a>Sample YAML for Basic authentication</h4>
<div class="paragraph">
<p>The following shows sample Basic authentication settings for a <code>Secret</code> object named <code>rw-basic-auth</code> in the <code>openshift-user-workload-monitoring</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rw-basic-auth</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">stringData</span><span class="pi">:</span>
  <span class="na">user</span><span class="pi">:</span> <span class="s">&lt;basic_username&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;basic_password&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The username.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The password.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample shows a <code>basicAuth</code> remote write configuration that uses a <code>Secret</code> object named <code>rw-basic-auth</code> in the <code>openshift-user-workload-monitoring</code> namespace.
It assumes that you have already set up authentication credentials for the endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://basicauth.example.com/api/write"</span>
        <span class="s">basicAuth:</span>
          <span class="s">username:</span>
            <span class="s">name: rw-basic-auth </span><i class="conum" data-value="1"></i><b>(1)</b>
            <span class="s">key: user </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">password:</span>
            <span class="s">name: rw-basic-auth </span><i class="conum" data-value="1"></i><b>(1)</b>
            <span class="s">key: password </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the <code>Secret</code> object that contains the authentication credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The key that contains the username  in the specified <code>Secret</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The key that contains the password in the specified <code>Secret</code> object.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="remote-write-sample-yaml-bearer-token_configuring-the-monitoring-stack"><a class="anchor" href="#remote-write-sample-yaml-bearer-token_configuring-the-monitoring-stack"></a>Sample YAML for authentication with a bearer token using a <code>Secret</code> Object</h4>
<div class="paragraph">
<p>The following shows bearer token settings for a <code>Secret</code> object named <code>rw-bearer-auth</code> in the <code>openshift-user-workload-monitoring</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rw-bearer-auth</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">stringData</span><span class="pi">:</span>
  <span class="na">token</span><span class="pi">:</span> <span class="s">&lt;authentication_token&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The authentication token.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following shows sample bearer token config map settings that use a <code>Secret</code> object named <code>rw-bearer-auth</code> in the <code>openshift-user-workload-monitoring</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">enableUserWorkload: true</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://authorization.example.com/api/write"</span>
        <span class="s">authorization:</span>
          <span class="s">type: Bearer </span><i class="conum" data-value="1"></i><b>(1)</b>
          <span class="s">credentials:</span>
            <span class="s">name: rw-bearer-auth </span><i class="conum" data-value="2"></i><b>(2)</b>
            <span class="s">key: token </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The authentication type of the request. The default value is <code>Bearer</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of the <code>Secret</code> object that contains the authentication credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The key that contains the authentication token in the specified <code>Secret</code> object.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="remote-write-sample-yaml-oauth-20_configuring-the-monitoring-stack"><a class="anchor" href="#remote-write-sample-yaml-oauth-20_configuring-the-monitoring-stack"></a>Sample YAML for OAuth 2.0 authentication</h4>
<div class="paragraph">
<p>The following shows sample OAuth 2.0 settings for a <code>Secret</code> object named <code>oauth2-credentials</code> in the <code>openshift-user-workload-monitoring</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">oauth2-credentials</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">stringData</span><span class="pi">:</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">&lt;oauth2_id&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="na">secret</span><span class="pi">:</span> <span class="s">&lt;oauth2_secret&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The Oauth 2.0 ID.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The OAuth 2.0 secret.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following shows an <code>oauth2</code> remote write authentication sample configuration that uses a <code>Secret</code> object named <code>oauth2-credentials</code> in the <code>openshift-user-workload-monitoring</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://test.example.com/api/write"</span>
        <span class="s">oauth2:</span>
          <span class="s">clientId:</span>
            <span class="s">secret:</span>
              <span class="s">name: oauth2-credentials </span><i class="conum" data-value="1"></i><b>(1)</b>
              <span class="s">key: id </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">clientSecret:</span>
            <span class="s">name: oauth2-credentials </span><i class="conum" data-value="1"></i><b>(1)</b>
            <span class="s">key: secret </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">tokenUrl: https://example.com/oauth2/token </span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="s">scopes: </span><i class="conum" data-value="4"></i><b>(4)</b>
          <span class="s">- &lt;scope_1&gt;</span>
          <span class="s">- &lt;scope_2&gt;</span>
          <span class="s">endpointParams: </span><i class="conum" data-value="5"></i><b>(5)</b>
            <span class="s">param1: &lt;parameter_1&gt;</span>
            <span class="s">param2: &lt;parameter_2&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the corresponding <code>Secret</code> object. Note that <code>ClientId</code> can alternatively refer to a <code>ConfigMap</code> object, although <code>clientSecret</code> must refer to a <code>Secret</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The key that contains the OAuth 2.0 credentials in the specified <code>Secret</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The URL used to fetch a token with the specified <code>clientId</code> and <code>clientSecret</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The OAuth 2.0 scopes for the authorization request. These scopes limit what data the tokens can access.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The OAuth 2.0 authorization request parameters required for the authorization server.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="remote-write-sample-yaml-tls_configuring-the-monitoring-stack"><a class="anchor" href="#remote-write-sample-yaml-tls_configuring-the-monitoring-stack"></a>Sample YAML for TLS client authentication</h4>
<div class="paragraph">
<p>The following shows sample TLS client settings for a <code>tls</code> <code>Secret</code> object named <code>mtls-bundle</code> in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">mtls-bundle</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">ca.crt</span><span class="pi">:</span> <span class="s">&lt;ca_cert&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="s">client.crt</span><span class="pi">:</span> <span class="s">&lt;client_cert&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="s">client.key</span><span class="pi">:</span> <span class="s">&lt;client_key&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="na">type</span><span class="pi">:</span> <span class="s">tls</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The CA certificate in the Prometheus container with which to validate the server certificate.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The client certificate for authentication with the server.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The client key.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample shows a <code>tlsConfig</code> remote write authentication configuration that uses a TLS <code>Secret</code> object named <code>mtls-bundle</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">tlsConfig:</span>
          <span class="s">ca:</span>
            <span class="s">secret:</span>
              <span class="s">name: mtls-bundle </span><i class="conum" data-value="1"></i><b>(1)</b>
              <span class="s">key: ca.crt </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">cert:</span>
            <span class="s">secret:</span>
              <span class="s">name: mtls-bundle </span><i class="conum" data-value="1"></i><b>(1)</b>
              <span class="s">key: client.crt </span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="s">keySecret:</span>
            <span class="s">name: mtls-bundle </span><i class="conum" data-value="1"></i><b>(1)</b>
            <span class="s">key: client.key </span><i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the corresponding <code>Secret</code> object that contains the TLS authentication credentials. Note that <code>ca</code> and <code>cert</code> can alternatively refer to a <code>ConfigMap</code> object, though <code>keySecret</code> must refer to a <code>Secret</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The key in the specified <code>Secret</code> object that contains the CA certificate for the endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The key in the specified <code>Secret</code> object that contains the client certificate for the endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The key in the specified <code>Secret</code> object that contains the client key secret.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-remote-write-queue-configuration_configuring-the-monitoring-stack"><a class="anchor" href="#example-remote-write-queue-configuration_configuring-the-monitoring-stack"></a>Example remote write queue configuration</h3>
<div class="paragraph">
<p>You can use the <code>queueConfig</code> object for remote write to tune the remote write queue parameters. The following example shows the queue parameters with their default values for
monitoring for user-defined projects
in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="listingblock">
<div class="title">Example configuration of remote write parameters with default values</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">&lt;endpoint_authentication_credentials&gt;</span>
        <span class="s">queueConfig:</span>
          <span class="s">capacity: 10000 </span><i class="conum" data-value="1"></i><b>(1)</b>
          <span class="s">minShards: 1 </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">maxShards: 50 </span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="s">maxSamplesPerSend: 2000 </span><i class="conum" data-value="4"></i><b>(4)</b>
          <span class="s">batchSendDeadline: 5s </span><i class="conum" data-value="5"></i><b>(5)</b>
          <span class="s">minBackoff: 30ms </span><i class="conum" data-value="6"></i><b>(6)</b>
          <span class="s">maxBackoff: 5s </span><i class="conum" data-value="7"></i><b>(7)</b>
          <span class="s">retryOnRateLimit: false </span><i class="conum" data-value="8"></i><b>(8)</b>
          <span class="s">sampleAgeLimit: 0s </span><i class="conum" data-value="9"></i><b>(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The number of samples to buffer per shard before they are dropped from the queue.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The minimum number of shards.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The maximum number of shards.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The maximum number of samples per send.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The maximum time for a sample to wait in buffer.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The initial time to wait before retrying a failed request. The time gets doubled for every retry up to the <code>maxbackoff</code> time.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The maximum time to wait before retrying a failed request.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Set this parameter to <code>true</code> to retry a request after receiving a 429 status code from the remote write storage.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>The samples that are older than the <code>sampleAgeLimit</code> limit are dropped from the queue. If the value is undefined or set to <code>0s</code>, the parameter is ignored.</td>
</tr>
</table>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://prometheus.io/docs/operating/integrations/#remote-endpoints-and-storage">Setting up remote write compatible endpoints</a> (Prometheus documentation)</p>
</li>
<li>
<p><a href="https://prometheus.io/docs/practices/remote_write/#remote-write-tuning">Tuning remote write settings</a> (Prometheus documentation)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-cluster-id-labels-to-metrics_configuring-the-monitoring-stack"><a class="anchor" href="#adding-cluster-id-labels-to-metrics_configuring-the-monitoring-stack"></a>Adding cluster ID labels to metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you manage multiple OpenShift Dedicated clusters and use the remote write feature to send metrics data from these clusters to an external storage location, you can add cluster ID labels to identify the metrics data coming from different clusters. You can then query these labels to identify the source cluster for a metric and distinguish that data from similar metrics data sent by other clusters.</p>
</div>
<div class="paragraph">
<p>This way, if you manage many clusters for multiple customers and send metrics data to a single centralized storage system, you can use cluster ID labels to query metrics for a particular cluster or customer.</p>
</div>
<div class="paragraph">
<p>Creating and using cluster ID labels involves three general steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configuring the write relabel settings for remote write storage.</p>
</li>
<li>
<p>Adding cluster ID labels to the metrics.</p>
</li>
<li>
<p>Querying these labels to identify the source cluster or customer for a metric.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="creating-cluster-id-labels-for-metrics_configuring-the-monitoring-stack"><a class="anchor" href="#creating-cluster-id-labels-for-metrics_configuring-the-monitoring-stack"></a>Creating cluster ID labels for metrics</h3>
<div class="paragraph">
<p>You can create cluster ID labels for metrics by adding the <code>write_relabel</code> settings for remote write storage in the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> namespace.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> ConfigMap object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
<li>
<p>You have configured remote write storage.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>writeRelabelConfigs:</code> section under <code>data/config.yaml/prometheus/remoteWrite</code>, add cluster ID relabel configuration values:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">&lt;endpoint_authentication_credentials&gt;</span>
        <span class="s">writeRelabelConfigs: </span><i class="conum" data-value="1"></i><b>(1)</b>
          <span class="s">- &lt;relabel_config&gt; </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add a list of write relabel configurations for metrics that you want to send to the remote endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Substitute the label configuration for the metrics sent to the remote write endpoint.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample shows how to forward a metric with the cluster ID label <code>cluster_id</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">remoteWrite:</span>
      <span class="s">- url: "https://remote-write-endpoint.example.com"</span>
        <span class="s">writeRelabelConfigs:</span>
        <span class="s">- sourceLabels:</span>
          <span class="s">- __tmp_openshift_cluster_id__ </span><i class="conum" data-value="1"></i><b>(1)</b>
          <span class="s">targetLabel: cluster_id </span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="s">action: replace </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The system initially applies a temporary cluster ID source label named <code>__tmp_openshift_cluster_id__</code>. This temporary label gets replaced by the cluster ID label name that you specify.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the name of the cluster ID label for metrics sent to remote write storage.
If you use a label name that already exists for a metric, that value is overwritten with the name of this cluster ID label.
For the label name, do not use <code>__tmp_openshift_cluster_id__</code>. The final relabeling step removes labels that use this name.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>replace</code> write relabel action replaces the temporary label with the target label for outgoing metrics.
This action is the default and is applied if no action is specified.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes. The new configuration is applied automatically.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="../../observability/monitoring/configuring-the-monitoring-stack.html#configuring-remote-write-storage_configuring-the-monitoring-stack">Configuring remote write storage</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controlling-the-impact-of-unbound-attributes-in-user-defined-projects_configuring-the-monitoring-stack"><a class="anchor" href="#controlling-the-impact-of-unbound-attributes-in-user-defined-projects_configuring-the-monitoring-stack"></a>Controlling the impact of unbound metrics attributes in user-defined projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Developers can create labels to define attributes for metrics in the form of key-value pairs. The number of potential key-value pairs corresponds to the number of possible values for an attribute. An attribute that has an unlimited number of potential values is called an unbound attribute. For example, a <code>customer_id</code> attribute is unbound because it has an infinite number of possible values.</p>
</div>
<div class="paragraph">
<p>Every assigned key-value pair has a unique time series. The use of many unbound attributes in labels can result in an exponential increase in the number of time series created. This can impact Prometheus performance and can consume a lot of disk space.</p>
</div>
<div class="paragraph">
<p>A <code>dedicated-admin</code>
can use the following measures to control the impact of unbound metrics attributes in user-defined projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Limit the number of samples that can be accepted per target scrape in user-defined projects</p>
</li>
<li>
<p>Limit the number of scraped labels, the length of label names, and the length of label values</p>
</li>
<li>
<p>Configure the intervals between consecutive scrapes and between Prometheus rule evaluations</p>
</li>
<li>
<p>Create alerts that fire when a scrape sample threshold is reached or when the target cannot be scraped</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Limiting scrape samples can help prevent the issues caused by adding many unbound attributes to labels. Developers can also prevent the underlying cause by limiting the number of unbound attributes that they define for metrics. Using attributes that are bound to a limited set of possible values reduces the number of potential key-value pair combinations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="setting-scrape-and-evaluation-intervals-limits-for-user-defined-projects_configuring-the-monitoring-stack"><a class="anchor" href="#setting-scrape-and-evaluation-intervals-limits-for-user-defined-projects_configuring-the-monitoring-stack"></a>Setting scrape intervals, evaluation intervals, and enforced limits for user-defined projects</h3>
<div class="paragraph">
<p>You can set the following scrape and label limits for user-defined projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Limit the number of samples that can be accepted per target scrape</p>
</li>
<li>
<p>Limit the number of scraped labels</p>
</li>
<li>
<p>Limit the length of label names and label values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also set an interval between consecutive scrapes and between Prometheus rule evaluations.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you set sample or label limits, no further sample data is ingested for that target scrape after the limit is reached.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add the enforced limit and time interval configurations to <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">enforcedSampleLimit: 50000 </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">enforcedLabelLimit: 500 </span><i class="conum" data-value="2"></i><b>(2)</b>
      <span class="s">enforcedLabelNameLengthLimit: 50 </span><i class="conum" data-value="3"></i><b>(3)</b>
      <span class="s">enforcedLabelValueLengthLimit: 600 </span><i class="conum" data-value="4"></i><b>(4)</b>
      <span class="s">scrapeInterval: 1m30s </span><i class="conum" data-value="5"></i><b>(5)</b>
      <span class="s">evaluationInterval: 1m15s </span><i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A value is required if this parameter is specified. This <code>enforcedSampleLimit</code> example limits the number of samples that can be accepted per target scrape in user-defined projects to 50,000.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the maximum number of labels per scrape.
The default value is <code>0</code>, which specifies no limit.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specifies the maximum character length for a label name.
The default value is <code>0</code>, which specifies no limit.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specifies the maximum character length for a label value.
The default value is <code>0</code>, which specifies no limit.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specifies the interval between consecutive scrapes. The interval must be set between 5 seconds and 5 minutes.
The default value is <code>30s</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Specifies the interval between Prometheus rule evaluations. The interval must be set between 5 seconds and 5 minutes.
The default value for Prometheus is <code>30s</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also configure the <code>evaluationInterval</code> property for Thanos Ruler through the <code>data/config.yaml/thanosRuler</code> field. The default value for Thanos Ruler is <code>15s</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes. The limits are applied automatically.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitoring-configuring-external-alertmanagers_configuring-the-monitoring-stack"><a class="anchor" href="#monitoring-configuring-external-alertmanagers_configuring-the-monitoring-stack"></a>Configuring external Alertmanager instances</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OpenShift Dedicated monitoring stack includes a local Alertmanager instance that routes alerts from Prometheus.</p>
</div>
<div class="paragraph">
<p>You can add external Alertmanager instances to route alerts for user-defined projects.</p>
</div>
<div class="paragraph">
<p>If you add the same external Alertmanager configuration for multiple clusters and disable the local instance for each cluster, you can then manage alert routing for multiple clusters by using a single external Alertmanager instance.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add an <code>additionalAlertmanagerConfigs</code> section with configuration details under
<code>data/config.yaml/&lt;component&gt;</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">&lt;component&gt;: </span><i class="conum" data-value="2"></i><b>(2)</b>
      <span class="s">additionalAlertmanagerConfigs:</span>
      <span class="s">- &lt;alertmanager_specification&gt; </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Substitute <code>&lt;alertmanager_specification&gt;</code> with authentication and other configuration details for additional Alertmanager instances.
Currently supported authentication methods are bearer token (<code>bearerToken</code>) and client TLS (<code>tlsConfig</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Substitute <code>&lt;component&gt;</code> for one of two supported external Alertmanager components: <code>prometheus</code> or <code>thanosRuler</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample config map configures an additional Alertmanager for Thanos Ruler by using a bearer token with client TLS authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">thanosRuler:</span>
      <span class="s">additionalAlertmanagerConfigs:</span>
      <span class="s">- scheme: https</span>
        <span class="s">pathPrefix: /</span>
        <span class="s">timeout: "30s"</span>
        <span class="s">apiVersion: v1</span>
        <span class="s">bearerToken:</span>
          <span class="s">name: alertmanager-bearer-token</span>
          <span class="s">key: token</span>
        <span class="s">tlsConfig:</span>
          <span class="s">key:</span>
            <span class="s">name: alertmanager-tls</span>
            <span class="s">key: tls.key</span>
          <span class="s">cert:</span>
            <span class="s">name: alertmanager-tls</span>
            <span class="s">key: tls.crt</span>
          <span class="s">ca:</span>
            <span class="s">name: alertmanager-tls</span>
            <span class="s">key: tls.ca</span>
        <span class="s">staticConfigs:</span>
        <span class="s">- external-alertmanager1-remote.com</span>
        <span class="s">- external-alertmanager1-remote2.com</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitoring-configuring-secrets-for-alertmanager_configuring-the-monitoring-stack"><a class="anchor" href="#monitoring-configuring-secrets-for-alertmanager_configuring-the-monitoring-stack"></a>Configuring secrets for Alertmanager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OpenShift Dedicated monitoring stack includes Alertmanager, which routes alerts from Prometheus to endpoint receivers.
If you need to authenticate with a receiver so that Alertmanager can send alerts to it, you can configure Alertmanager to use a secret that contains authentication credentials for the receiver.</p>
</div>
<div class="paragraph">
<p>For example, you can configure Alertmanager to use a secret to authenticate with an endpoint receiver that requires a certificate issued by a private Certificate Authority (CA).
You can also configure Alertmanager to use a secret to authenticate with a receiver that requires a password file for Basic HTTP authentication.
In either case, authentication details are contained in the <code>Secret</code> object rather than in the <code>ConfigMap</code> object.</p>
</div>
<div class="sect2">
<h3 id="monitoring-adding-a-secret-to-the-alertmanager-configuration_configuring-the-monitoring-stack"><a class="anchor" href="#monitoring-adding-a-secret-to-the-alertmanager-configuration_configuring-the-monitoring-stack"></a>Adding a secret to the Alertmanager configuration</h3>
<div class="paragraph">
<p>You can add secrets to the Alertmanager configuration by editing the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project.</p>
</div>
<div class="paragraph">
<p>After you add a secret to the config map, the secret is mounted as a volume at <code>/etc/alertmanager/secrets/&lt;secret_name&gt;</code> within the <code>alertmanager</code> container for the Alertmanager pods.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have created the secret to be configured in Alertmanager in the <code>openshift-user-workload-monitoring</code> project.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add a <code>secrets:</code> section under <code>data/config.yaml/alertmanager</code> with the following configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">alertmanager:</span>
      <span class="s">secrets: </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">- &lt;secret_name_1&gt; </span><i class="conum" data-value="2"></i><b>(2)</b>
      <span class="s">- &lt;secret_name_2&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This section contains the secrets to be mounted into Alertmanager. The secrets must be located within the same namespace as the Alertmanager object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of the <code>Secret</code> object that contains authentication credentials for the receiver. If you add multiple secrets, place each one on a new line.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample config map settings configure Alertmanager to use two <code>Secret</code> objects named <code>test-secret-basic-auth</code> and <code>test-secret-api-token</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">alertmanager:</span>
      <span class="s">secrets:</span>
      <span class="s">- test-secret-basic-auth</span>
      <span class="s">- test-secret-api-token</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The new configuration is applied automatically.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="attaching-additional-labels-to-your-time-series-and-alerts_configuring-the-monitoring-stack"><a class="anchor" href="#attaching-additional-labels-to-your-time-series-and-alerts_configuring-the-monitoring-stack"></a>Attaching additional labels to your time series and alerts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can attach custom labels to all time series and alerts leaving Prometheus by using the external labels feature of Prometheus.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Define labels you want to add for every metric under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">externalLabels:</span>
        <span class="s">&lt;key&gt;: &lt;value&gt; </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Substitute <code>&lt;key&gt;: &lt;value&gt;</code> with key-value pairs where <code>&lt;key&gt;</code> is a unique name for the new label and <code>&lt;value&gt;</code> is its value.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Do not use <code>prometheus</code> or <code>prometheus_replica</code> as key names, because they are reserved and will be overwritten.</p>
</li>
<li>
<p>Do not use <code>cluster</code> or <code>managed_cluster</code> as key names. Using them can cause issues where you are unable to see data in the developer dashboards.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the <code>openshift-user-workload-monitoring</code> project, Prometheus handles metrics and Thanos Ruler handles alerting and recording rules. Setting <code>externalLabels</code> for <code>prometheus</code> in the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object will only configure external labels for metrics and not for any rules.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, to add metadata about the region and environment to all time series and alerts, use the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">externalLabels:</span>
        <span class="s">region: eu</span>
        <span class="s">environment: prod</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-pod-topology-spread-constraints-for-monitoring_configuring-the-monitoring-stack"><a class="anchor" href="#using-pod-topology-spread-constraints-for-monitoring_configuring-the-monitoring-stack"></a>About pod topology spread constraints for monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use pod topology spread constraints to control how the monitoring pods are spread across a network topology when OpenShift Dedicated pods are deployed in multiple availability zones.</p>
</div>
<div class="paragraph">
<p>Pod topology spread constraints are suitable for controlling pod scheduling within hierarchical topologies in which nodes are spread across different infrastructure levels, such as regions and zones within those regions.
Additionally, by being able to schedule pods in different zones, you can improve network latency in certain scenarios.</p>
</div>
<div class="paragraph">
<p>You can configure pod topology spread constraints for all the pods deployed by the Cluster Monitoring Operator to control how pod replicas are scheduled to nodes across zones. This ensures that the pods are highly available and run more efficiently, because workloads are spread across nodes in different data centers or hierarchical infrastructure zones.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/">Kubernetes Pod Topology Spread Constraints documentation</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="configuring-pod-topology-spread-constraints_configuring-the-monitoring-stack"><a class="anchor" href="#configuring-pod-topology-spread-constraints_configuring-the-monitoring-stack"></a>Configuring pod topology spread constraints</h3>
<div class="paragraph">
<p>You can configure pod topology spread constraints for
all the pods for user-defined monitoring
to control how pod replicas are scheduled to nodes across zones.
This ensures that the pods are highly available and run more efficiently, because workloads are spread across nodes in different data centers or hierarchical infrastructure zones.</p>
</div>
<div class="paragraph">
<p>You can configure pod topology spread constraints for monitoring pods by using the <code>user-workload-monitoring-config</code> config map.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following settings under the <code>data/config.yaml</code> field to configure pod topology spread constraints:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">&lt;component&gt;: </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">topologySpreadConstraints:</span>
      <span class="s">- maxSkew: &lt;n&gt; </span><i class="conum" data-value="2"></i><b>(2)</b>
        <span class="s">topologyKey: &lt;key&gt; </span><i class="conum" data-value="3"></i><b>(3)</b>
        <span class="s">whenUnsatisfiable: &lt;value&gt; </span><i class="conum" data-value="4"></i><b>(4)</b>
        <span class="s">labelSelector: </span><i class="conum" data-value="5"></i><b>(5)</b>
          <span class="s">&lt;match_option&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify a name of the component for which you want to set up pod topology spread constraints.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify a numeric value for <code>maxSkew</code>, which defines the degree to which pods are allowed to be unevenly distributed.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a key of node labels for <code>topologyKey</code>.
Nodes that have a label with this key and identical values are considered to be in the same topology.
The scheduler tries to put a balanced number of pods into each domain.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify a value for <code>whenUnsatisfiable</code>.
Available options are <code>DoNotSchedule</code> and <code>ScheduleAnyway</code>.
Specify <code>DoNotSchedule</code> if you want the <code>maxSkew</code> value to define the maximum difference allowed between the number of matching pods in the target topology and the global minimum.
Specify <code>ScheduleAnyway</code> if you want the scheduler to still schedule the pod but to give higher priority to nodes that might reduce the skew.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specify <code>labelSelector</code> to find matching pods.
Pods that match this label selector are counted to determine the number of pods in their corresponding topology domain.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example configuration for Thanos Ruler</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">thanosRuler:</span>
      <span class="s">topologySpreadConstraints:</span>
      <span class="s">- maxSkew: 1</span>
        <span class="s">topologyKey: monitoring</span>
        <span class="s">whenUnsatisfiable: ScheduleAnyway</span>
        <span class="s">labelSelector:</span>
          <span class="s">matchLabels:</span>
            <span class="s">app.kubernetes.io/name: thanos-ruler</span></code></pre>
</div>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-log-levels-for-monitoring-components_configuring-the-monitoring-stack"><a class="anchor" href="#setting-log-levels-for-monitoring-components_configuring-the-monitoring-stack"></a>Setting log levels for monitoring components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure the log level for Alertmanager, Prometheus Operator, Prometheus, and Thanos Ruler.</p>
</div>
<div class="paragraph">
<p>The following log levels can be applied to the relevant component in the <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>debug</code>. Log debug, informational, warning, and error messages.</p>
</li>
<li>
<p><code>info</code>. Log informational, warning, and error messages.</p>
</li>
<li>
<p><code>warn</code>. Log warning and error messages only.</p>
</li>
<li>
<p><code>error</code>. Log error messages only.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default log level is <code>info</code>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add <code>logLevel: &lt;log_level&gt;</code> for a component under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">&lt;component&gt;: </span><i class="conum" data-value="1"></i><b>(1)</b>
      <span class="s">logLevel: &lt;log_level&gt; </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The monitoring stack component for which you are setting a log level.
Available component values are <code>prometheus</code>, <code>alertmanager</code>, <code>prometheusOperator</code>, and <code>thanosRuler</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The log level to set for the component.
The available values are <code>error</code>, <code>warn</code>, <code>info</code>, and <code>debug</code>.
The default value is <code>info</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
<li>
<p>Confirm that the log level has been applied by reviewing the deployment or pod configuration in the related project.
The following example checks the log level for the <code>prometheus-operator</code> deployment:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring get deploy prometheus-operator <span class="nt">-o</span> yaml | <span class="nb">grep</span> <span class="s2">"log-level"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="go">        - --log-level=debug</span></code></pre>
</div>
</div>
</li>
<li>
<p>Check that the pods for the component are running. The following example lists the status of pods:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring get pods</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If an unrecognized <code>logLevel</code> value is included in the <code>ConfigMap</code> object, the pods for the component might not restart successfully.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-query-log-file-for-prometheus_configuring-the-monitoring-stack"><a class="anchor" href="#setting-query-log-file-for-prometheus_configuring-the-monitoring-stack"></a>Enabling the query log file for Prometheus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure Prometheus to write all queries that have been run by the engine to a log file.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Because log rotation is not supported, only enable this feature temporarily when you need to troubleshoot an issue. After you finish troubleshooting, disable query logging by reverting the changes you made to the <code>ConfigMap</code> object to enable the feature.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have access to the cluster as a user with the <code>dedicated-admin</code> role.</p>
</li>
<li>
<p>The <code>user-workload-monitoring-config</code> <code>ConfigMap</code> object exists. This object is created by default when the cluster is created.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Edit the <code>user-workload-monitoring-config</code> config map in the <code>openshift-user-workload-monitoring</code> project:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring edit configmap user-workload-monitoring-config</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>queryLogFile</code> parameter for Prometheus under <code>data/config.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">user-workload-monitoring-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-user-workload-monitoring</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="s">config.yaml</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">prometheus:</span>
      <span class="s">queryLogFile: &lt;path&gt; </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add the full path to the file in which queries will be logged.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file to apply the changes. The pods affected by the new configuration are automatically redeployed.</p>
</li>
<li>
<p>Verify that the pods for the component are running. The following sample command lists the status of pods:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring get pods</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="c">...
</span><span class="go">prometheus-operator-776fcbbd56-2nbfm   2/2     Running   0          132m
prometheus-user-workload-0             5/5     Running   1          132m
prometheus-user-workload-1             5/5     Running   1          132m
thanos-ruler-user-workload-0           3/3     Running   0          132m
thanos-ruler-user-workload-1           3/3     Running   0          132m
</span><span class="c">...</span></code></pre>
</div>
</div>
</li>
<li>
<p>Read the query log:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>oc <span class="nt">-n</span> openshift-user-workload-monitoring <span class="nb">exec </span>prometheus-user-workload-0 <span class="nt">--</span> <span class="nb">cat</span> &lt;path&gt;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Revert the setting in the config map after you have examined the logged query information.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/nav-tertiary.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/reformat-html.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/hc-search.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/clipboard.js" type="text/javascript"></script>
  <script src="https://docs.okd.io/latest/_javascripts/collapsible.js" type="text/javascript"></script>
  <script>
  var dk = 'openshift-dedicated';
  var version = '';

  var distros = {
    'openshift-origin': ['docs_origin', version],
    // specific labels are used for OSD instead of the URL filter, due to its unusual URL structure; assume v4
    'openshift-dedicated': ['docs_dedicated_v4'],
    'openshift-online': ['docs_online', version],
    'openshift-enterprise': ['docs_cp', version],
    'openshift-telco': ['docs_telco', version],
    'openshift-aro' : ['docs_aro', version],
    'openshift-rosa' : ['docs_rosa'],
    'openshift-acs' : ['docs_acs', version],
    'openshift-serverless' : ['docs_serverless', version],
    'openshift-pipelines' : ['docs_pipelines', version],
    'openshift-builds' : ['docs_builds', version],
    'openshift-gitops' : ['docs_gitops', version],
    'openshift-lightspeed' : ['docs_lightspeed', version],
    'openshift-service-mesh' : ['docs_service_mesh', version]
  };

  // only OSD v3 docs have the version variable specified
  if (dk == "openshift-dedicated" && version == "3") {
    distros['openshift-dedicated'] = ['docs_dedicated_v3']
  }

  distros[dk] ? hcSearchCategory.apply(null, distros[dk]) : hcSearchCategory("docs");
  </script>
  <script type="text/javascript">
  /*<![CDATA[*/
  $(document).ready(function() {
    $("[id^='topicGroup']").on('show.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicGroup']").on('hide.bs.collapse', function(event) {
      if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
        $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
      }
    });
    $("[id^='topicSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('show.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });
    $("[id^='topicSubSubGroup']").on('hide.bs.collapse', function() {
      $(this).parent().find("[id^='ssgSpan']").toggleClass("fa-caret-right fa-caret-down");
    });

    const collapsibleContent = document.getElementsByTagName("details");
    for (var i = 0; i < collapsibleContent.length; i++) {
      collapsibleContent[i].setAttribute("open", "");
    }

  });
  /*]]>*/
  </script>

  <footer id="rh">

    <div class="container">
        <div class="row">

            <div class="col-sm-2">
                <img src="https://assets.openshift.net/content/img/Logo-Red_Hat-OpenShift-A-Reverse-RGB.svg" class="img-fluid" alt="Red Hat" style="height: 30px;">
            </div>

            <div class="col-sm-3">
              <p class="text-nowrap">Copyright © 2025 Red Hat, Inc.</p>
            </div>



            <div class="col">
                <nav class="nav">
                    <a target="_blank" href="https://www.redhat.com/en/about/privacy-policy" class="nav-link">Privacy statement</a>
                    <a target="_blank" href="https://www.openshift.com/legal/terms/" class="nav-link">Terms of use</a>
                    <a target="_blank" href="https://www.redhat.com/en/about/all-policies-guidelines" class="nav-link">All policies and guidelines</a>
                    <a id="teconsent"></a>
                </nav>
            </div>
        </div>
    </div>
</footer>
<div id="consent_blackbar" style="z-index: 100; position: fixed"></div>



<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->

  <!-- adjust page css based on breadcrumb and/or resize -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      }
    });

    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        adjustSide();
        adjustToc();
        adjustMain();
      } else if ($(window).width() < 1008) {
        sidebar.classList.remove('wide');
        document.querySelector('#hc-search').classList.remove('wide');
        if (sidebar.classList.contains('open')) {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }
        document.querySelector('.main').style.paddingTop = '0px';
      }
    });

    function adjustSide() {
      sidebar.classList.add('wide');
      document.querySelector('#hc-search').classList.add('wide');
      sidebar.style.display = 'block';
      document.querySelector('.sidebar').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 125), 10) + "px";
      document.querySelector('#hc-search').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 95), 10) + "px";
    }

    function adjustToc() {
      if (document.querySelector('#toc') !== null) {
        document.querySelector('#toc').style.top = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      }
    }

    function adjustMain() {
      document.querySelector('html').style.scrollPaddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight + 90), 10) + "px";
      document.querySelector('.main').style.paddingTop = parseInt((document.querySelector('.breadcrumb').offsetHeight - 70), 10) + "px";
    }

  </script>

  <!-- remove toc active class when page is loaded -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      var tocItems = $("#toc a");

      for (let i = 0; i < tocItems.length; i++) {
        tocItems[i].classList.remove("toc-active");
      }
    })
  </script>

  <!-- maintain sidebar scroll position between page loads -->
  <script type="text/javascript">
    let sidebar = document.querySelector(".sidebar");
    let scrolltop = localStorage.getItem("sidebar-scroll");

    if (scrolltop == null) {
      sidebar.scrollTop = parseInt(top, 10);
    }

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
    });

    window.addEventListener('load', () => {
      sidebar.scrollTo(0, scrolltop)
    })
  </script>

  <!-- open/close the nav -->
  <script type="text/javascript">
    function closeNav() {
      let sidebar = document.querySelector(".sidebar");
      sidebar.style.display = "none";
      sidebar.classList.remove('open');
    }

    function openNav() {
      let sidebar = document.querySelector(".sidebar");
      let hc_search = document.querySelector('#hc-search');
      sidebar.style.display = "block";
      sidebar.style.top = "0px";
      hc_search.style.top = 'unset';
      sidebar.classList.add('open');
    }
  </script>

  <!-- clear and add toc-active to clicked toc link -->
  <script type="text/javascript">
  $("#toc a").click(function() {
    var tocItems = $("#toc a");
    for (let i = 0; i < tocItems.length; i++) {
      tocItems[i].classList.remove("toc-active");
    }
    this.classList.add("toc-active");
  });
  </script>

  <!-- update active toc class when mouse scrolls -->
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener("wheel", () => {

        const ioConfiguration = {
          "rootMargin": "-120px 0px -400px 0px",
          "threshold": 0
        };

        const observer = new IntersectionObserver(setCurrent, ioConfiguration, entries => {
          entries.forEach(entry => {
            var id = entry.target.getAttribute('id');
            //fight with js
            document.querySelector(`#toc li a[href="#${id}"]`).classList.remove('toc-active');
          });
        });

        //track all h1-4 headings that have an id
        document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
          observer.observe(h);
        });

        //runs when the IntersectionObserver fires
        function setCurrent(e) {
          var allTocLinks = document.querySelectorAll("#toc li a");
          if (allTocLinks !== undefined) {
            e.map(i => {
              if (i.isIntersecting && i.intersectionRatio >= 1) {
                allTocLinks.forEach(link => link.classList.remove("toc-active"));
                document.querySelector(`#toc li a[href="#${i.target.id}"]`).classList.add('toc-active')
              }
            })
          }
        };

        //make clicked toc item active and stop IntersectionObserver
        $("#toc a").click(function() {
          //stop tracking all h1-4 headings that have an id
          document.querySelectorAll('.main h2[id], .main h3[id]').forEach((h) => {
            observer.unobserve(h);
          });
          var tocItems = $("#toc a");
          if (tocItems !== undefined) {
            for (let i = 0; i < tocItems.length; i++) {
              tocItems[i].classList.remove("toc-active");
            };
            this.classList.add("toc-active");
          }
        })
      })
    })
  </script>

  <!--handle page scroll top and bottom, add toc-active -->
  <script type="text/javascript">
    document.addEventListener('scroll', () => {
      //scroll to bottom
      if(document.documentElement.scrollHeight === window.pageYOffset + window.innerHeight) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active")
          };
          tocItems[tocItems.length - 1].classList.add("toc-active");
        };
      //scroll to top
      if(window.pageYOffset === 0) {
        var tocItems = $("#toc a");
        for (let i = 0; i < tocItems.length; i++) {
          tocItems[i].classList.remove("toc-active");
          };
          tocItems[0].classList.add("toc-active");
        };
      })
  </script>

  <!-- adjust alerts on mobile -->
  <script type="text/javascript">
    alert = document.querySelector('#support-alert')
    window.addEventListener("wheel", () => {
      if ($(window).width() < 1008) {
        //adjust alert
        if(window.pageYOffset > 0) {
          if(alert !== null) {
            document.querySelector('#support-alert').style.position = "fixed";
            document.querySelector('#support-alert').style.bottom = "0px";
            document.querySelector('#support-alert').style.margin = "5px";
            document.querySelector('#support-alert').style.zIndex = "9999999";
          }
        }
      }
   });
    window.addEventListener('resize', () => {
      if ($(window).width() >= 1008) {
        if(alert !== null) {
          document.querySelector('#support-alert').style.removeProperty('position');
          document.querySelector('#support-alert').style.removeProperty('bottom');
          document.querySelector('#support-alert').style.removeProperty('margin');
          document.querySelector('#support-alert').style.removeProperty('zIndex');
        }
      }
    })
  </script>

  <!-- hide footer after 3 seconds -->
  <script type="text/javascript">
    const hideFooter = () => {
      document.querySelector('footer#rh, footer.footer-origin-docs').style.display = "none";
    };

    window.addEventListener('load', function() {
      setTimeout(hideFooter, 3000);
    });
  </script>
</body>
</html>